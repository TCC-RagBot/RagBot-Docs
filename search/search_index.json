{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"RAGBot - Sistema de Chat Inteligente","text":""},{"location":"#o-problema","title":"O Problema","text":"<p>Na Universidade de Bras\u00edlia, s\u00e3o realizadas dezenas de reuni\u00f5es administrativas e acad\u00eamicas mensalmente. Cada reuni\u00e3o gera uma ata com decis\u00f5es importantes, delibera\u00e7\u00f5es e encaminhamentos.</p> <p>O desafio: localizar uma decis\u00e3o espec\u00edfica entre centenas de atas \u00e9 um processo manual, demorado e ineficiente. \u00c9 necess\u00e1rio:</p> <ul> <li>Identificar qual reuni\u00e3o tratou do assunto</li> <li>Baixar e abrir o PDF da ata correspondente</li> <li>Ler p\u00e1gina por p\u00e1gina at\u00e9 encontrar a informa\u00e7\u00e3o</li> <li>Repetir o processo se a informa\u00e7\u00e3o estiver em m\u00faltiplas atas</li> </ul> <p>Esse processo consome tempo valioso de estudantes, professores e gestores que precisam consultar decis\u00f5es anteriores.</p>"},{"location":"#a-solucao","title":"A Solu\u00e7\u00e3o","text":"<p>O RAGBot \u00e9 um sistema de chat inteligente que utiliza t\u00e9cnicas de Recupera\u00e7\u00e3o Aumentada por Gera\u00e7\u00e3o (RAG) para responder perguntas sobre documentos da UnB em linguagem natural.</p>"},{"location":"#como-funciona","title":"Como funciona","text":"<ol> <li>Ingest\u00e3o de Documentos: O sistema processa e armazena PDFs das atas em um banco de dados vetorial</li> <li>Busca Sem\u00e2ntica: Quando o usu\u00e1rio faz uma pergunta, o sistema busca os trechos mais relevantes nos documentos</li> <li>Gera\u00e7\u00e3o de Resposta: Uma IA analisa os trechos encontrados e gera uma resposta natural, sempre baseada exclusivamente no conte\u00fado dos documentos</li> </ol>"},{"location":"#principais-caracteristicas","title":"Principais caracter\u00edsticas","text":"<ul> <li>Respostas precisas: Baseadas apenas no conte\u00fado dos documentos carregados</li> <li>Interface intuitiva: Design limpo estilo ChatGPT, f\u00e1cil de usar</li> <li>Cita\u00e7\u00e3o de fontes: Cada resposta mostra os documentos utilizados</li> <li>Modo an\u00f4nimo: N\u00e3o requer autentica\u00e7\u00e3o para uso b\u00e1sico</li> </ul>"},{"location":"#stack-tecnologica","title":"Stack Tecnol\u00f3gica","text":""},{"location":"#frontend","title":"Frontend","text":"<ul> <li>Vue 3 + TypeScript: Interface moderna e reativa</li> <li>Tailwind CSS: Design system responsivo</li> <li>Vite: Build tool de alta performance</li> </ul>"},{"location":"#backend","title":"Backend","text":"<ul> <li>Python 3.11 + FastAPI: API REST r\u00e1pida e robusta</li> <li>LangChain: Orquestra\u00e7\u00e3o do pipeline RAG</li> <li>Google Gemini AI: Modelo de linguagem para gera\u00e7\u00e3o de respostas</li> </ul>"},{"location":"#dados","title":"Dados","text":"<ul> <li>PostgreSQL 15: Banco de dados relacional</li> <li>pgvector: Extens\u00e3o para busca vetorial</li> <li>sentence-transformers: Gera\u00e7\u00e3o de embeddings sem\u00e2nticos</li> </ul>"},{"location":"#repositorios","title":"Reposit\u00f3rios","text":"<p>O projeto est\u00e1 organizado em tr\u00eas reposit\u00f3rios no GitHub:</p> <ul> <li>RagBot-Back - Backend API</li> <li>RagBot-Front - Interface Web</li> <li>RagBot-Docs - Documenta\u00e7\u00e3o</li> </ul>"},{"location":"#publico-alvo","title":"P\u00fablico-Alvo","text":"<p>O sistema foi desenvolvido para atender a comunidade acad\u00eamica da UnB:</p> <ul> <li>Estudantes: Consultar decis\u00f5es sobre cursos, disciplinas e calend\u00e1rio acad\u00eamico</li> <li>Professores: Verificar delibera\u00e7\u00f5es sobre projetos e quest\u00f5es acad\u00eamicas</li> <li>Gestores: Acessar rapidamente decis\u00f5es administrativas anteriores</li> </ul>"},{"location":"sobre/","title":"Objetivos e Justificativa","text":""},{"location":"sobre/#objetivo-geral","title":"Objetivo Geral","text":"<p>Desenvolver um sistema de chat inteligente baseado em RAG (Retrieval-Augmented Generation) que permita \u00e0 comunidade acad\u00eamica da UnB consultar informa\u00e7\u00f5es contidas em documentos institucionais de forma r\u00e1pida, precisa e eficiente, eliminando a necessidade de busca manual em m\u00faltiplos arquivos PDF.</p>"},{"location":"sobre/#objetivos-especificos","title":"Objetivos Espec\u00edficos","text":""},{"location":"sobre/#1-interface-do-usuario","title":"1. Interface do Usu\u00e1rio","text":"<p>Criar uma interface web intuitiva e acess\u00edvel que:</p> <ul> <li>Proporcione uma experi\u00eancia de uso simples e agrad\u00e1vel</li> <li>Funcione de forma responsiva em diferentes dispositivos</li> <li>Ofere\u00e7a suporte a temas claro e escuro</li> <li>Apresente respostas de forma clara com cita\u00e7\u00e3o de fontes</li> </ul>"},{"location":"sobre/#2-backend-e-pipeline-rag","title":"2. Backend e Pipeline RAG","text":"<p>Desenvolver uma API robusta capaz de:</p> <ul> <li>Processar e ingerir documentos PDF automaticamente</li> <li>Realizar busca sem\u00e2ntica eficiente em grandes volumes de texto</li> <li>Interpretar perguntas em linguagem natural</li> <li>Gerar respostas baseadas exclusivamente no conte\u00fado dos documentos</li> </ul>"},{"location":"sobre/#3-armazenamento-e-recuperacao","title":"3. Armazenamento e Recupera\u00e7\u00e3o","text":"<p>Implementar uma solu\u00e7\u00e3o de banco de dados que:</p> <ul> <li>Armazene embeddings vetoriais para busca sem\u00e2ntica</li> <li>Mantenha registro de conversas e intera\u00e7\u00f5es</li> <li>Permita escalabilidade conforme o volume de documentos cresce</li> <li>Garanta performance adequada nas consultas</li> </ul>"},{"location":"sobre/#4-qualidade-e-confiabilidade","title":"4. Qualidade e Confiabilidade","text":"<p>Assegurar a qualidade do sistema atrav\u00e9s de:</p> <ul> <li>Testes automatizados das funcionalidades principais</li> <li>Containeriza\u00e7\u00e3o para facilitar deploy e manuten\u00e7\u00e3o</li> <li>Documenta\u00e7\u00e3o t\u00e9cnica clara e completa</li> <li>Respostas verific\u00e1veis com cita\u00e7\u00e3o de fontes</li> </ul>"},{"location":"sobre/#justificativa","title":"Justificativa","text":""},{"location":"sobre/#ganho-de-tempo","title":"Ganho de Tempo","text":"<p>A busca manual em atas pode levar horas quando se precisa verificar m\u00faltiplas reuni\u00f5es. O RAGBot reduz esse tempo para segundos, permitindo que a comunidade acad\u00eamica foque em atividades mais estrat\u00e9gicas.</p>"},{"location":"sobre/#acessibilidade-da-informacao","title":"Acessibilidade da Informa\u00e7\u00e3o","text":"<p>Muitas informa\u00e7\u00f5es importantes ficam \"perdidas\" em documentos que poucas pessoas conseguem localizar. O sistema democratiza o acesso a essas informa\u00e7\u00f5es, tornando-as dispon\u00edveis para toda a comunidade.</p>"},{"location":"sobre/#precisao-e-confiabilidade","title":"Precis\u00e3o e Confiabilidade","text":"<p>Diferente de uma busca gen\u00e9rica ou respostas de IA n\u00e3o fundamentadas, o RAGBot sempre cita as fontes e baseia suas respostas exclusivamente nos documentos fornecidos, aumentando a confian\u00e7a nas informa\u00e7\u00f5es.</p>"},{"location":"sobre/#aplicabilidade-ampla","title":"Aplicabilidade Ampla","text":"<p>Embora desenvolvido para atas da UnB, a solu\u00e7\u00e3o pode ser adaptada para outros contextos que envolvam consulta a grandes volumes de documentos:</p> <ul> <li>Documenta\u00e7\u00e3o t\u00e9cnica de empresas</li> <li>Arquivos jur\u00eddicos e processos</li> <li>Bases de conhecimento corporativas</li> <li>Material did\u00e1tico e acad\u00eamico</li> </ul>"},{"location":"sobre/#relevancia-tecnologica","title":"Relev\u00e2ncia Tecnol\u00f3gica","text":"<p>O projeto utiliza tecnologias modernas e em alta demanda no mercado:</p> <ul> <li>RAG: T\u00e9cnica consolidada para sistemas de IA confi\u00e1veis</li> <li>Embeddings vetoriais: Fundamental para busca sem\u00e2ntica</li> <li>API REST moderna: Padr\u00e3o da ind\u00fastria para servi\u00e7os web</li> <li>Containeriza\u00e7\u00e3o: Essencial para DevOps e Cloud</li> </ul> <p>A implementa\u00e7\u00e3o bem-sucedida deste TCC demonstra compet\u00eancias t\u00e9cnicas relevantes para o mercado de trabalho em Engenharia de Software.</p>"},{"location":"Arquitetura/arquitetura/","title":"Arquitetura do Sistema","text":""},{"location":"Arquitetura/arquitetura/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O RAGBot foi projetado com uma arquitetura de tr\u00eas camadas bem definidas, seguindo princ\u00edpios de separa\u00e7\u00e3o de responsabilidades e modularidade. A arquitetura permite escalabilidade, manutenibilidade e facilita a adi\u00e7\u00e3o de novas funcionalidades.</p> <pre><code>graph TB\n    subgraph \"Camada de Apresenta\u00e7\u00e3o\"\n        A[Vue 3 Frontend]\n        A1[Componentes UI]\n        A2[Router SPA]\n        A3[State Management]\n    end\n\n    subgraph \"Camada de Aplica\u00e7\u00e3o\"\n        B[FastAPI Backend]\n        B1[Routes/Endpoints]\n        B2[Services RAG]\n        B3[Repositories]\n    end\n\n    subgraph \"Camada de Dados\"\n        C[PostgreSQL + pgvector]\n        C1[Tabelas Relacionais]\n        C2[Embeddings Vetoriais]\n    end\n\n    subgraph \"Servi\u00e7os Externos\"\n        D[Google Gemini AI]\n        E[sentence-transformers]\n    end\n\n    A --&gt; B\n    B --&gt; C\n    B --&gt; D\n    B --&gt; E\n\n    style A fill:#42b983\n    style B fill:#009688\n    style C fill:#336791\n    style D fill:#4285f4\n    style E fill:#ff6b6b</code></pre>"},{"location":"Arquitetura/arquitetura/#stack-tecnologica-completa","title":"Stack Tecnol\u00f3gica Completa","text":"Categoria Tecnologias Frontend Vue 3, TypeScript, Vite, Tailwind CSS Backend Python 3.11, FastAPI, Pydantic, LangChain IA e ML Google Gemini 2.5 Flash, sentence-transformers, all-MiniLM-L6-v2 Banco de Dados PostgreSQL 15, pgvector DevOps Docker Testes pytest, Vitest Qualidade Loguru (logging), uvicorn (ASGI server)"},{"location":"Arquitetura/arquitetura/#decisoes-de-design-e-justificativas","title":"Decis\u00f5es de Design e Justificativas","text":""},{"location":"Arquitetura/arquitetura/#modelo-de-embeddings-all-minilm-l6-v2","title":"Modelo de Embeddings: all-MiniLM-L6-v2","text":"<p>Escolha estrat\u00e9gica para efici\u00eancia:</p> <ul> <li>Tamanho compacto: Apenas 80MB, pode ser armazenado localmente</li> <li>Execu\u00e7\u00e3o em CPU: N\u00e3o requer GPU, reduz custos de infraestrutura</li> <li>Dimensionalidade: 384 dimens\u00f5es (balan\u00e7o entre precis\u00e3o e performance)</li> <li>Velocidade: Capaz de processar centenas de chunks em segundos</li> <li>Qualidade: Excelente desempenho em tarefas de busca sem\u00e2ntica</li> </ul>"},{"location":"Arquitetura/arquitetura/#llm-google-gemini-ai","title":"LLM: Google Gemini AI","text":"<p>Vantagens do uso de API externa:</p> <ul> <li>Sem custo de infraestrutura: N\u00e3o requer servidores de GPU</li> <li>Sem custo monet\u00e1rio: API gratuita para uso moderado</li> <li>Atualiza\u00e7\u00e3o autom\u00e1tica: Melhorias do modelo sem necessidade de retreinamento</li> <li>Escalabilidade: Capacidade de processamento gerenciada pelo Google</li> <li>Modelo avan\u00e7ado: gemini-2.5-flash com suporte a instru\u00e7\u00f5es complexas</li> </ul>"},{"location":"Arquitetura/arquitetura/#banco-vetorial-pgvector","title":"Banco Vetorial: pgvector","text":"<p>Integra\u00e7\u00e3o nativa com PostgreSQL:</p> <ul> <li>Simplicidade: Um \u00fanico banco para dados relacionais e vetoriais</li> <li>Manuten\u00e7\u00e3o reduzida: Sem necessidade de sincronizar m\u00faltiplos bancos</li> <li>ACID compliance: Transa\u00e7\u00f5es garantem consist\u00eancia dos dados</li> <li>Performance: Algoritmos HNSW para busca vetorial eficiente</li> <li>Maturidade: PostgreSQL \u00e9 confi\u00e1vel e amplamente conhecido</li> </ul>"},{"location":"Arquitetura/arquitetura/#arquitetura-modular","title":"Arquitetura Modular","text":"<p>Benef\u00edcios da separa\u00e7\u00e3o em camadas:</p> <ul> <li>Escalabilidade: Cada camada pode escalar independentemente</li> <li>Manutenibilidade: C\u00f3digo organizado facilita altera\u00e7\u00f5es</li> <li>Testabilidade: Camadas podem ser testadas isoladamente</li> <li>Flexibilidade: F\u00e1cil substituir componentes (ex: trocar o LLM)</li> <li>Onboarding: Desenvolvedores novos navegam o c\u00f3digo facilmente</li> </ul>"},{"location":"Arquitetura/arquitetura/#caracteristicas-de-performance","title":"Caracter\u00edsticas de Performance","text":""},{"location":"Arquitetura/arquitetura/#processamento-eficiente","title":"Processamento Eficiente","text":"<ul> <li>Ass\u00edncrono: FastAPI usa async/await para n\u00e3o bloquear I/O</li> <li>Embedding local: Gera\u00e7\u00e3o de embeddings sem lat\u00eancia de rede</li> <li>Busca otimizada: pgvector usa \u00edndices HNSW para busca r\u00e1pida</li> <li>Caching inteligente: sentence-transformers carrega modelo uma vez</li> </ul>"},{"location":"Arquitetura/arquitetura/#boas-praticas-implementadas","title":"Boas Pr\u00e1ticas Implementadas","text":""},{"location":"Arquitetura/arquitetura/#codigo-limpo","title":"C\u00f3digo Limpo","text":"<ul> <li>TypeScript: Frontend fortemente tipado</li> <li>Naming conventions: Nomes descritivos e consistentes</li> <li>DRY principle: Reutiliza\u00e7\u00e3o de c\u00f3digo, sem duplica\u00e7\u00e3o</li> </ul>"},{"location":"Arquitetura/arquitetura/#seguranca","title":"Seguran\u00e7a","text":"<ul> <li>Valida\u00e7\u00e3o de entrada: Pydantic valida todos os dados de entrada</li> <li>CORS configur\u00e1vel: Prote\u00e7\u00e3o contra requisi\u00e7\u00f5es n\u00e3o autorizadas</li> <li>Sanitiza\u00e7\u00e3o de PDFs: Valida\u00e7\u00e3o de formato e tamanho</li> <li>Error handling: Tratamento adequado de exce\u00e7\u00f5es</li> </ul>"},{"location":"Arquitetura/arquitetura/#observabilidade","title":"Observabilidade","text":"<ul> <li>Logging estruturado: Todas as opera\u00e7\u00f5es s\u00e3o logadas</li> <li>Tempo de processamento: M\u00e9tricas de performance registradas</li> <li>Error tracking: Erros s\u00e3o capturados e contextualizados</li> <li>Request logging: Requisi\u00e7\u00f5es HTTP s\u00e3o monitoradas</li> </ul>"},{"location":"Arquitetura/backend/","title":"Backend - Estrutura e Implementa\u00e7\u00e3o","text":""},{"location":"Arquitetura/backend/#fastapi-framework-moderno","title":"FastAPI: Framework Moderno","text":""},{"location":"Arquitetura/backend/#configuracao-da-aplicacao","title":"Configura\u00e7\u00e3o da Aplica\u00e7\u00e3o","text":"<p>A aplica\u00e7\u00e3o \u00e9 inicializada com middlewares e handlers essenciais:</p> <pre><code>app = FastAPI(\n    title=\"RAGBot\",\n    version=\"1.0.0\",\n    description=\"Backend API para sistema RAG\"\n)\n\n# CORS para comunica\u00e7\u00e3o com frontend\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"] if debug else [\"http://localhost:5173\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"]\n)\n\n# Middleware de logging\napp.middleware(\"http\")(log_requests)\n\n# Error handlers personalizados\napp.exception_handler(404)(not_found_handler)\napp.exception_handler(500)(internal_error_handler)\n</code></pre>"},{"location":"Arquitetura/backend/#lifecycle-management","title":"Lifecycle Management","text":"<p>O FastAPI gerencia o ciclo de vida da aplica\u00e7\u00e3o:</p> <pre><code>@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # Inicializa\u00e7\u00e3o\n    logger.info(\"Iniciando RAGBot...\")\n    if not db_manager.test_connection():\n        raise RuntimeError(\"Falha na conex\u00e3o com banco\")\n\n    yield  # Aplica\u00e7\u00e3o rodando\n\n    # Finaliza\u00e7\u00e3o\n    logger.info(\"Finalizando RAGBot...\")\n</code></pre> <p>Vantagens:</p> <ul> <li>Valida\u00e7\u00e3o de depend\u00eancias na inicializa\u00e7\u00e3o</li> <li>Falha r\u00e1pida se configura\u00e7\u00e3o estiver incorreta</li> <li>Cleanup adequado ao encerrar</li> </ul>"},{"location":"Arquitetura/backend/#pydantic-validacao-de-dados","title":"Pydantic: Valida\u00e7\u00e3o de Dados","text":""},{"location":"Arquitetura/backend/#schemas-tipados","title":"Schemas Tipados","text":"<p>O Pydantic garante que todos os dados de entrada e sa\u00edda sejam validados:</p> <pre><code>class ChatRequest(BaseModel):\n    message: str = Field(\n        ..., \n        min_length=1, \n        max_length=1000,\n        description=\"Mensagem do usu\u00e1rio\"\n    )\n    conversation_id: Optional[UUID] = Field(\n        None, \n        description=\"ID da conversa\"\n    )\n    max_chunks: int = Field(\n        ..., \n        ge=1, \n        le=10,\n        description=\"M\u00e1ximo de chunks a recuperar\"\n    )\n\nclass ChatResponse(BaseModel):\n    response: str\n    conversation_id: UUID\n    message_id: UUID\n    sources: List[SourceChunk]\n    processing_time: float\n</code></pre>"},{"location":"Arquitetura/backend/#beneficios","title":"Benef\u00edcios","text":"<p>Valida\u00e7\u00e3o Autom\u00e1tica:</p> <ul> <li>FastAPI valida requests automaticamente</li> <li>Erros 422 com detalhes do que est\u00e1 errado</li> <li>Convers\u00e3o de tipos autom\u00e1tica</li> </ul> <p>Documenta\u00e7\u00e3o:</p> <ul> <li>Schemas aparecem no Swagger UI</li> <li>Exemplos de requests/responses gerados</li> <li>Tipos e descri\u00e7\u00f5es claras</li> </ul> <p>Type Safety:</p> <ul> <li>IDEs oferecem autocompletar</li> <li>Erros de tipo detectados antes da execu\u00e7\u00e3o</li> <li>Refatora\u00e7\u00e3o segura do c\u00f3digo</li> </ul>"},{"location":"Arquitetura/backend/#estrutura-de-pastas","title":"Estrutura de Pastas","text":"<p>A organiza\u00e7\u00e3o do c\u00f3digo segue o padr\u00e3o de camadas:</p> <pre><code>app/\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 settings.py       # Vari\u00e1veis de ambiente\n\u2502   \u2514\u2500\u2500 constants.py      # Constantes da aplica\u00e7\u00e3o\n\u2502\n\u251c\u2500\u2500 routes/\n\u2502   \u251c\u2500\u2500 core_routes.py    # Health check, info\n\u2502   \u251c\u2500\u2500 chat_routes.py    # Endpoints de chat\n\u2502   \u2514\u2500\u2500 document_routes.py # Upload e listagem de documentos\n\u2502\n\u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 chat_service.py   # L\u00f3gica do RAG\n\u2502   \u2514\u2500\u2500 document_service.py # Processamento de documentos\n\u2502\n\u251c\u2500\u2500 repositories/\n\u2502   \u251c\u2500\u2500 chat_repository.py      # Opera\u00e7\u00f5es de conversas\n\u2502   \u251c\u2500\u2500 document_repository.py  # Opera\u00e7\u00f5es de documentos\n\u2502   \u2514\u2500\u2500 vector_repository.py    # Busca vetorial\n\u2502\n\u251c\u2500\u2500 schemas/\n\u2502   \u251c\u2500\u2500 chat_schemas.py         # Modelos de chat\n\u2502   \u251c\u2500\u2500 document_schemas.py     # Modelos de documentos\n\u2502   \u2514\u2500\u2500 shared_schemas.py       # Modelos compartilhados\n\u2502\n\u251c\u2500\u2500 application.py        # Factory da aplica\u00e7\u00e3o\n\u2514\u2500\u2500 main.py              # Entry point\n</code></pre>"},{"location":"Arquitetura/backend/#camadas-e-responsabilidades","title":"Camadas e Responsabilidades","text":""},{"location":"Arquitetura/backend/#1-routes-endpoints","title":"1. Routes (Endpoints)","text":"<p>Responsabilidade: Receber requisi\u00e7\u00f5es HTTP e retornar respostas.</p> <pre><code>@router.post(\"/ask\", response_model=ChatResponse)\nasync def ask_question(request: ChatRequest):\n    \"\"\"Endpoint para enviar perguntas ao chatbot.\"\"\"\n    service = ChatService()\n    response = await service.process_chat(\n        user_message=request.message,\n        max_chunks=request.max_chunks,\n        conversation_id=request.conversation_id\n    )\n    return response\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Valida\u00e7\u00e3o de entrada via Pydantic</li> <li>Chamadas ass\u00edncronas para n\u00e3o bloquear</li> <li>Documenta\u00e7\u00e3o via docstrings</li> <li>Status codes HTTP apropriados</li> </ul>"},{"location":"Arquitetura/backend/#2-services-logica-de-negocio","title":"2. Services (L\u00f3gica de Neg\u00f3cio)","text":"<p>Responsabilidade: Implementar a l\u00f3gica principal do sistema.</p> <pre><code>class ChatService:\n    def __init__(self):\n        self.model = genai.GenerativeModel('gemini-2.5-flash')\n        self.vector_store = get_vector_store()\n        self.chat_repository = ChatRepository()\n\n    async def process_chat(self, user_message: str, \n                          max_chunks: int) -&gt; ChatResponse:\n        # 1. Buscar chunks relevantes\n        chunks = self.vector_store.similarity_search(\n            user_message, k=max_chunks\n        )\n\n        # 2. Construir prompt\n        prompt = self._build_prompt(user_message, chunks)\n\n        # 3. Gerar resposta com Gemini\n        response = self.model.generate_content(prompt)\n\n        # 4. Salvar no banco\n        self.chat_repository.save_message(...)\n\n        return ChatResponse(...)\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Orquestra\u00e7\u00e3o de m\u00faltiplos componentes</li> <li>L\u00f3gica de neg\u00f3cio isolada</li> <li>F\u00e1cil de testar unitariamente</li> <li>Sem depend\u00eancia direta do FastAPI</li> </ul>"},{"location":"Arquitetura/backend/#3-repositories-acesso-a-dados","title":"3. Repositories (Acesso a Dados)","text":"<p>Responsabilidade: Interagir com banco de dados e vector store.</p> <pre><code>class ChatRepository:\n    def create_conversation(self) -&gt; UUID:\n        \"\"\"Cria nova conversa no banco.\"\"\"\n        query = \"INSERT INTO conversations DEFAULT VALUES RETURNING id\"\n        result = db_manager.execute_query(query)\n        return result[0]['id']\n\n    def save_message(self, conversation_id: UUID, \n                     role: str, content: str) -&gt; UUID:\n        \"\"\"Salva mensagem no banco.\"\"\"\n        query = \"\"\"\n            INSERT INTO messages (conversation_id, role, content)\n            VALUES (%s, %s, %s) RETURNING id\n        \"\"\"\n        result = db_manager.execute_query(\n            query, (conversation_id, role, content)\n        )\n        return result[0]['id']\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Abstra\u00e7\u00e3o do acesso a dados</li> <li>Queries SQL isoladas</li> <li>Facilita troca de banco de dados</li> <li>Test\u00e1vel com mock do banco</li> </ul>"},{"location":"Arquitetura/backend/#4-schemas-modelos-de-dados","title":"4. Schemas (Modelos de Dados)","text":"<p>Responsabilidade: Definir contratos de entrada e sa\u00edda.</p> <pre><code>class SourceChunk(BaseModel):\n    content: str = Field(..., description=\"Trecho do documento\")\n    document_name: str = Field(..., description=\"Nome do documento\")\n    page_number: Optional[int] = Field(None, description=\"N\u00famero da p\u00e1gina\")\n    similarity_score: float = Field(..., description=\"Score de similaridade\")\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Reutiliz\u00e1veis entre diferentes endpoints</li> <li>Valida\u00e7\u00e3o consistente em todo sistema</li> <li>Documenta\u00e7\u00e3o centralizada</li> <li>Type hints para toda aplica\u00e7\u00e3o</li> </ul>"},{"location":"Arquitetura/backend/#boas-praticas-implementadas","title":"Boas Pr\u00e1ticas Implementadas","text":""},{"location":"Arquitetura/backend/#separation-of-concerns","title":"Separation of Concerns","text":"<p>Cada camada tem responsabilidade bem definida:</p> <ul> <li>Routes: HTTP apenas</li> <li>Services: L\u00f3gica de neg\u00f3cio</li> <li>Repositories: Persist\u00eancia</li> <li>Schemas: Valida\u00e7\u00e3o</li> </ul>"},{"location":"Arquitetura/backend/#dependency-injection","title":"Dependency Injection","text":"<p>FastAPI facilita inje\u00e7\u00e3o de depend\u00eancias:</p> <pre><code>def get_chat_service() -&gt; ChatService:\n    return ChatService()\n\n@router.post(\"/ask\")\nasync def ask_question(\n    request: ChatRequest,\n    service: ChatService = Depends(get_chat_service)\n):\n    return await service.process_chat(...)\n</code></pre>"},{"location":"Arquitetura/backend/#logging-estruturado","title":"Logging Estruturado","text":"<p>Toda opera\u00e7\u00e3o importante \u00e9 registrada:</p> <pre><code>logger.info(f\"Processing chat request: {user_message[:50]}...\")\nlogger.info(f\"Found {len(chunks)} relevant chunks\")\nlogger.success(f\"Response generated in {elapsed:.2f}s\")\nlogger.error(f\"Error processing chat: {e}\")\n</code></pre> <p>Benef\u00edcios:</p> <ul> <li>Debug facilitado em produ\u00e7\u00e3o</li> <li>Auditoria de opera\u00e7\u00f5es</li> <li>Monitoramento de performance</li> <li>Rastreamento de erros</li> </ul>"},{"location":"Arquitetura/backend/#error-handling-centralizado","title":"Error Handling Centralizado","text":"<p>Erros s\u00e3o tratados consistentemente:</p> <pre><code>@app.exception_handler(404)\nasync def not_found_handler(request: Request, exc):\n    return JSONResponse(\n        status_code=404,\n        content={\n            \"error\": \"Endpoint n\u00e3o encontrado\",\n            \"detail\": f\"O endpoint {request.url.path} n\u00e3o existe\"\n        }\n    )\n</code></pre>"},{"location":"Arquitetura/backend/#type-hints-completos","title":"Type Hints Completos","text":"<p>Todo o c\u00f3digo usa type annotations:</p> <pre><code>def similarity_search(\n    self, \n    query: str, \n    k: int = 5\n) -&gt; List[Dict[str, Any]]:\n    ...\n</code></pre> <p>Vantagens:</p> <ul> <li>IDEs oferecem autocompletar melhor</li> <li>Detec\u00e7\u00e3o de erros em tempo de desenvolvimento</li> <li>Documenta\u00e7\u00e3o impl\u00edcita do c\u00f3digo</li> <li>Facilita refatora\u00e7\u00e3o</li> </ul>"},{"location":"Arquitetura/backend/#configuracao-via-ambiente","title":"Configura\u00e7\u00e3o via Ambiente","text":"<p>Todas as configura\u00e7\u00f5es s\u00e3o externalizadas:</p> <pre><code>class Settings(BaseSettings):\n    database_url: str\n    gemini_api_key: str\n    debug: bool = False\n    log_level: str = \"INFO\"\n\n    class Config:\n        env_file = \".env\"\n</code></pre> <p>Benef\u00edcios:</p> <ul> <li>Diferentes configs por ambiente (dev/prod)</li> <li>Secrets n\u00e3o ficam no c\u00f3digo</li> <li>F\u00e1cil deploy em containers</li> <li>Configura\u00e7\u00e3o centralizada</li> </ul>"},{"location":"Arquitetura/backend/#performance-e-escalabilidade","title":"Performance e Escalabilidade","text":""},{"location":"Arquitetura/backend/#operacoes-assincronas","title":"Opera\u00e7\u00f5es Ass\u00edncronas","text":"<p>FastAPI permite I/O n\u00e3o bloqueante:</p> <pre><code>async def process_chat(...):\n    # N\u00e3o bloqueia thread enquanto espera BD\n    chunks = await self.vector_store.similarity_search(...)\n\n    # N\u00e3o bloqueia thread enquanto espera Gemini\n    response = await self.model.generate_content(...)\n</code></pre>"},{"location":"Arquitetura/backend/#modularidade","title":"Modularidade","text":"<p>A arquitetura permite escalar componentes independentemente:</p> <ul> <li>Services podem virar microservi\u00e7os</li> <li>Repositories podem usar cache</li> <li>Routes podem ter rate limiting</li> <li>F\u00e1cil adicionar novos endpoints</li> </ul>"},{"location":"Arquitetura/backend/#testabilidade","title":"Testabilidade","text":"<p>Separa\u00e7\u00e3o de camadas facilita testes:</p> <ul> <li>Unit tests nos Services</li> <li>Integration tests nos Repositories</li> <li>E2E tests nas Routes</li> <li>Mock de depend\u00eancias externas</li> </ul>"},{"location":"Arquitetura/banco-dados/","title":"Banco de Dados","text":""},{"location":"Arquitetura/banco-dados/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O sistema utiliza PostgreSQL 15 com a extens\u00e3o pgvector para armazenar tanto dados relacionais quanto embeddings vetoriais. Essa abordagem h\u00edbrida elimina a necessidade de m\u00faltiplos bancos de dados e simplifica a arquitetura.</p>"},{"location":"Arquitetura/banco-dados/#estrategia-de-armazenamento","title":"Estrat\u00e9gia de Armazenamento","text":""},{"location":"Arquitetura/banco-dados/#dados-relacionais","title":"Dados Relacionais","text":"<ul> <li>Conversas e mensagens do chat</li> <li>Metadados dos documentos processados</li> <li>Chunks de origem das respostas</li> </ul>"},{"location":"Arquitetura/banco-dados/#dados-vetoriais","title":"Dados Vetoriais","text":"<ul> <li>Embeddings dos chunks de documentos (384 dimens\u00f5es)</li> <li>\u00cdndices para busca por similaridade</li> <li>Gerenciados automaticamente pelo LangChain</li> </ul>"},{"location":"Arquitetura/banco-dados/#esquema-do-banco-de-dados","title":"Esquema do Banco de Dados","text":"<pre><code>erDiagram\n    conversations ||--o{ messages : contains\n    messages ||--o{ message_source_chunks : references\n    documents {\n        uuid id PK\n        text filename\n        int chunks_count\n        bigint file_size_bytes\n        timestamptz processed_at\n        timestamptz created_at\n    }\n    conversations {\n        uuid id PK\n        timestamptz created_at\n    }\n    messages {\n        uuid id PK\n        uuid conversation_id FK\n        text role\n        text content\n        timestamptz created_at\n    }\n    message_source_chunks {\n        uuid message_id FK\n        text chunk_content\n        text document_name\n        float similarity_score\n    }</code></pre>"},{"location":"Arquitetura/banco-dados/#tabelas-detalhadas","title":"Tabelas Detalhadas","text":""},{"location":"Arquitetura/banco-dados/#1-conversations","title":"1. conversations","text":"<p>Armazena as conversas dos usu\u00e1rios.</p> <pre><code>CREATE TABLE conversations (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n</code></pre> <p>Campos: - <code>id</code>: Identificador \u00fanico da conversa - <code>created_at</code>: Data/hora de cria\u00e7\u00e3o</p> <p>Prop\u00f3sito: - Agrupar mensagens de uma mesma sess\u00e3o de chat - Manter contexto de conversa\u00e7\u00f5es - Permitir hist\u00f3rico de intera\u00e7\u00f5es</p>"},{"location":"Arquitetura/banco-dados/#2-messages","title":"2. messages","text":"<p>Armazena todas as mensagens trocadas (usu\u00e1rio e assistente).</p> <pre><code>CREATE TABLE messages (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    conversation_id UUID NOT NULL REFERENCES conversations(id) ON DELETE CASCADE,\n    role TEXT NOT NULL CHECK (role IN ('user', 'assistant')),\n    content TEXT NOT NULL,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n</code></pre> <p>Campos: - <code>id</code>: Identificador \u00fanico da mensagem - <code>conversation_id</code>: Refer\u00eancia \u00e0 conversa - <code>role</code>: Quem enviou (<code>user</code> ou <code>assistant</code>) - <code>content</code>: Conte\u00fado da mensagem - <code>created_at</code>: Timestamp da mensagem</p> <p>Prop\u00f3sito: - Registrar perguntas do usu\u00e1rio - Armazenar respostas geradas - Permitir hist\u00f3rico completo de conversas</p> <p>Relacionamentos: - <code>ON DELETE CASCADE</code>: Se conversa for deletada, mensagens s\u00e3o removidas</p>"},{"location":"Arquitetura/banco-dados/#3-message_source_chunks","title":"3. message_source_chunks","text":"<p>Relaciona mensagens com os chunks de documentos usados como fonte.</p> <pre><code>CREATE TABLE message_source_chunks (\n    message_id UUID NOT NULL REFERENCES messages(id) ON DELETE CASCADE,\n    chunk_content TEXT NOT NULL,\n    document_name TEXT NOT NULL,\n    similarity_score FLOAT,\n    PRIMARY KEY (message_id, chunk_content)\n);\n</code></pre> <p>Campos: - <code>message_id</code>: Refer\u00eancia \u00e0 mensagem do assistente - <code>chunk_content</code>: Trecho do documento utilizado - <code>document_name</code>: Nome do arquivo PDF de origem - <code>similarity_score</code>: Score de similaridade (0-1)</p> <p>Prop\u00f3sito: - Rastreabilidade das respostas - Cita\u00e7\u00e3o de fontes - Auditoria de qualidade das respostas</p>"},{"location":"Arquitetura/banco-dados/#4-documents","title":"4. documents","text":"<p>Metadados dos documentos processados.</p> <pre><code>CREATE TABLE documents (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    filename TEXT NOT NULL UNIQUE,\n    chunks_count INTEGER NOT NULL,\n    file_size_bytes BIGINT NOT NULL,\n    processed_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n</code></pre> <p>Campos: - <code>id</code>: Identificador \u00fanico do documento - <code>filename</code>: Nome do arquivo (\u00fanico) - <code>chunks_count</code>: Quantidade de chunks gerados - <code>file_size_bytes</code>: Tamanho do arquivo em bytes - <code>processed_at</code>: Quando foi processado - <code>created_at</code>: Data de upload</p> <p>Prop\u00f3sito: - Listar documentos dispon\u00edveis - Evitar reprocessamento duplicado - Estat\u00edsticas de processamento</p> <p>Restri\u00e7\u00f5es: - <code>filename</code> \u00e9 UNIQUE (n\u00e3o permite duplicatas)</p>"},{"location":"Arquitetura/banco-dados/#pgvector-busca-vetorial","title":"pgvector: Busca Vetorial","text":""},{"location":"Arquitetura/banco-dados/#o-que-e-pgvector","title":"O que \u00e9 pgvector?","text":"<p>pgvector \u00e9 uma extens\u00e3o do PostgreSQL que adiciona suporte nativo para:</p> <ul> <li>Armazenamento de vetores de alta dimens\u00e3o</li> <li>Opera\u00e7\u00f5es de similaridade (cosseno, L2, produto interno)</li> <li>\u00cdndices otimizados para busca vetorial</li> </ul>"},{"location":"Arquitetura/banco-dados/#por-que-usar-pgvector","title":"Por que usar pgvector?","text":"<p>Integra\u00e7\u00e3o nativa:</p> <ul> <li>Tudo em um \u00fanico banco de dados</li> <li>Transa\u00e7\u00f5es ACID para dados vetoriais</li> <li>Sem sincroniza\u00e7\u00e3o entre bancos diferentes</li> </ul> <p>Performance:</p> <ul> <li>Algoritmo HNSW (Hierarchical Navigable Small World)</li> <li>Busca aproximada eficiente em milh\u00f5es de vetores</li> <li>\u00cdndices otimizados para high-dimensional data</li> </ul> <p>Simplicidade operacional:</p> <ul> <li>Backup e restore unificados</li> <li>Ferramentas existentes do PostgreSQL funcionam</li> <li>Deployment simplificado</li> </ul>"},{"location":"Arquitetura/banco-dados/#tabela-de-embeddings","title":"Tabela de Embeddings","text":"<p>O LangChain gerencia automaticamente a tabela <code>langchain_pg_embedding</code>:</p> <pre><code>CREATE TABLE langchain_pg_embedding (\n    id UUID PRIMARY KEY,\n    collection_id UUID,\n    embedding VECTOR(384),  -- Dimens\u00e3o do all-MiniLM-L6-v2\n    document TEXT,\n    cmetadata JSONB\n);\n</code></pre> <p>Campos importantes:</p> <ul> <li><code>embedding</code>: Vetor de 384 dimens\u00f5es</li> <li><code>document</code>: Conte\u00fado textual do chunk</li> <li><code>cmetadata</code>: Metadados JSON (filename, page, etc)</li> </ul>"},{"location":"Arquitetura/banco-dados/#estrategia-de-busca","title":"Estrat\u00e9gia de Busca","text":"<p>O sistema usa similaridade de cosseno para busca:</p> <pre><code>results = vector_store.similarity_search_with_score(\n    query=\"pergunta do usu\u00e1rio\",\n    k=5  # Top 5 chunks mais relevantes\n)\n</code></pre> <p>Funcionamento:</p> <ol> <li>Pergunta do usu\u00e1rio \u00e9 convertida em embedding (384 dims)</li> <li>pgvector calcula dist\u00e2ncia cosseno entre query e todos chunks</li> <li>Retorna top-k chunks mais similares com scores</li> <li>Chunks s\u00e3o usados como contexto para o LLM</li> </ol>"},{"location":"Arquitetura/banco-dados/#indices-para-performance","title":"\u00cdndices para Performance","text":"<p>pgvector cria \u00edndices automaticamente:</p> <pre><code>CREATE INDEX ON langchain_pg_embedding \nUSING hnsw (embedding vector_cosine_ops);\n</code></pre> <p>Algoritmo HNSW:</p> <ul> <li>Navega\u00e7\u00e3o hier\u00e1rquica em grafo</li> <li>Busca aproximada em tempo logar\u00edtmico</li> <li>Trade-off entre precis\u00e3o e velocidade</li> </ul>"},{"location":"Arquitetura/banco-dados/#fluxo-de-dados","title":"Fluxo de Dados","text":""},{"location":"Arquitetura/banco-dados/#ingestao-de-documentos","title":"Ingest\u00e3o de Documentos","text":"<pre><code>sequenceDiagram\n    participant Script as ingest.py\n    participant PG as PostgreSQL\n    participant Vec as pgvector\n\n    Script-&gt;&gt;PG: INSERT INTO documents (metadados)\n    Script-&gt;&gt;Vec: INSERT embeddings (LangChain)\n    Vec-&gt;&gt;Vec: Atualiza \u00edndices HNSW\n    Vec--&gt;&gt;Script: Confirma\u00e7\u00e3o</code></pre>"},{"location":"Arquitetura/banco-dados/#busca-e-resposta","title":"Busca e Resposta","text":"<pre><code>sequenceDiagram\n    participant API as FastAPI\n    participant Vec as pgvector\n    participant PG as PostgreSQL\n    participant Gemini as Gemini AI\n\n    API-&gt;&gt;Vec: similarity_search(query)\n    Vec-&gt;&gt;Vec: Busca por similaridade\n    Vec--&gt;&gt;API: Top-k chunks\n    API-&gt;&gt;Gemini: generate(prompt + chunks)\n    Gemini--&gt;&gt;API: Resposta\n    API-&gt;&gt;PG: INSERT message + sources</code></pre>"},{"location":"Arquitetura/banco-dados/#configuracao-e-deployment","title":"Configura\u00e7\u00e3o e Deployment","text":""},{"location":"Arquitetura/banco-dados/#docker-compose","title":"Docker Compose","text":"<p>O banco \u00e9 provisionado via Docker:</p> <pre><code>services:\n  db:\n    image: pgvector/pgvector:pg16\n    environment:\n      POSTGRES_DB: ragbot_db\n      POSTGRES_USER: tccrag\n      POSTGRES_PASSWORD: tcc123\n    ports:\n      - \"5433:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql\n</code></pre> <p>Vantagens:</p> <ul> <li>Imagem oficial com pgvector pr\u00e9-instalado</li> <li>Schema criado automaticamente via init.sql</li> <li>Persist\u00eancia via volume Docker</li> <li>F\u00e1cil reset do ambiente</li> </ul>"},{"location":"Arquitetura/banco-dados/#inicializacao-automatica","title":"Inicializa\u00e7\u00e3o Autom\u00e1tica","text":"<p>O script <code>init.sql</code> \u00e9 executado na primeira inicializa\u00e7\u00e3o:</p> <pre><code>CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\nCREATE EXTENSION IF NOT EXISTS \"vector\";\n\n-- Criar tabelas...\n</code></pre>"},{"location":"Arquitetura/banco-dados/#conexao-da-aplicacao","title":"Conex\u00e3o da Aplica\u00e7\u00e3o","text":"<p>FastAPI conecta via string de conex\u00e3o:</p> <pre><code>DATABASE_URL = \"postgresql://tccrag:tcc123@localhost:5433/ragbot_db\"\n\n# Valida\u00e7\u00e3o na inicializa\u00e7\u00e3o\nif not db_manager.test_connection():\n    raise RuntimeError(\"Conex\u00e3o com banco falhou\")\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/","title":"Pipeline RAG","text":""},{"location":"Arquitetura/rag-pipeline/#o-que-e-rag","title":"O que \u00e9 RAG?","text":"<p>RAG (Retrieval-Augmented Generation) \u00e9 uma t\u00e9cnica que combina busca de informa\u00e7\u00f5es com gera\u00e7\u00e3o de texto por IA. Em vez de depender apenas do conhecimento interno de um modelo de linguagem, o RAG:</p> <ol> <li>Recupera documentos relevantes de uma base de conhecimento</li> <li>Aumenta o prompt com contexto espec\u00edfico</li> <li>Gera respostas fundamentadas nos documentos fornecidos</li> </ol>"},{"location":"Arquitetura/rag-pipeline/#por-que-usar-rag","title":"Por que usar RAG?","text":"<p>Vantagens sobre LLMs puros:</p> <ul> <li>Respostas baseadas em dados espec\u00edficos e verific\u00e1veis</li> <li>N\u00e3o inventa informa\u00e7\u00f5es (menos \"alucina\u00e7\u00f5es\")</li> <li>Conhecimento atualiz\u00e1vel sem retreinar modelo</li> <li>Cita\u00e7\u00e3o de fontes para cada resposta</li> <li>Controle sobre a base de conhecimento</li> </ul> <p>Caso de uso do RAGBot:</p> <ul> <li>Base: Documentos PDF da UnB (atas, resolu\u00e7\u00f5es)</li> <li>Objetivo: Responder perguntas apenas com base nesses documentos</li> <li>Benef\u00edcio: Respostas confi\u00e1veis e rastre\u00e1veis</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#fluxo-de-ingestao-de-documentos","title":"Fluxo de Ingest\u00e3o de Documentos","text":"<p>O processo de adicionar documentos ao sistema envolve v\u00e1rias etapas:</p> <pre><code>sequenceDiagram\n    participant User as Usu\u00e1rio/Script\n    participant API as FastAPI\n    participant Loader as PyPDFLoader\n    participant Splitter as Text Splitter\n    participant Embed as Sentence Transformer\n    participant Vec as pgvector\n    participant DB as PostgreSQL\n\n    User-&gt;&gt;API: Upload PDF\n    API-&gt;&gt;API: Validar arquivo (tamanho, tipo)\n    API-&gt;&gt;Loader: Carregar PDF\n    Loader-&gt;&gt;Loader: Extrair texto por p\u00e1gina\n    Loader--&gt;&gt;API: Lista de documentos\n\n    API-&gt;&gt;Splitter: Dividir em chunks\n    Splitter-&gt;&gt;Splitter: RecursiveCharacterTextSplitter\n    Splitter--&gt;&gt;API: Lista de chunks\n\n    API-&gt;&gt;Embed: Gerar embeddings\n    Embed-&gt;&gt;Embed: all-MiniLM-L6-v2 (local)\n    Embed--&gt;&gt;API: Vetores 384-dim\n\n    API-&gt;&gt;Vec: Salvar embeddings + texto\n    Vec-&gt;&gt;Vec: Criar \u00edndice HNSW\n    Vec--&gt;&gt;API: Confirma\u00e7\u00e3o\n\n    API-&gt;&gt;DB: Salvar metadados\n    DB--&gt;&gt;API: document_id\n\n    API--&gt;&gt;User: Sucesso (chunks_count, id)</code></pre>"},{"location":"Arquitetura/rag-pipeline/#1-upload-e-validacao","title":"1. Upload e Valida\u00e7\u00e3o","text":"<p>Endpoint: <code>POST /documents/upload</code></p> <pre><code># Valida\u00e7\u00f5es realizadas\n- Tipo: Apenas PDFs\n- Tamanho: M\u00e1ximo 50MB\n- Nome: N\u00e3o duplicado\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#2-extracao-de-texto","title":"2. Extra\u00e7\u00e3o de Texto","text":"<p>Biblioteca: LangChain PyPDFLoader</p> <pre><code>loader = PyPDFLoader(pdf_path)\ndocuments = loader.load()\n# Cada p\u00e1gina vira um Document com metadados\n</code></pre> <p>Metadados preservados:</p> <ul> <li>Nome do arquivo</li> <li>N\u00famero da p\u00e1gina</li> <li>Outros metadados do PDF</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#3-chunking-divisao-em-pedacos","title":"3. Chunking (Divis\u00e3o em Peda\u00e7os)","text":"<p>Estrat\u00e9gia: RecursiveCharacterTextSplitter</p> <pre><code>text_splitter = RecursiveCharacterTextSplitter(\n    chunk_size=1000,      # M\u00e1ximo de 1000 caracteres\n    chunk_overlap=150     # 150 caracteres de overlap\n)\nchunks = text_splitter.split_documents(documents)\n</code></pre> <p>Por que dividir?</p> <ul> <li>LLMs t\u00eam limite de contexto</li> <li>Chunks menores = busca mais precisa</li> <li>Overlap evita perda de contexto nas bordas</li> </ul> <p>Exemplo de chunking: <pre><code>Documento: \"Lorem ipsum dolor sit amet...\"\n\nChunk 1: [0-1000]   \"Lorem ipsum dolor...\"\nChunk 2: [850-1850] \"...sit amet consectetur...\" (overlap de 150)\nChunk 3: [1700-2700] \"...adipiscing elit sed...\"\n</code></pre></p>"},{"location":"Arquitetura/rag-pipeline/#4-geracao-de-embeddings","title":"4. Gera\u00e7\u00e3o de Embeddings","text":"<p>Modelo: sentence-transformers/all-MiniLM-L6-v2</p> <pre><code>embeddings_model = SentenceTransformer('all-MiniLM-L6-v2')\nvectors = embeddings_model.encode(chunks)\n# Output: Array de vetores 384-dimensionais\n</code></pre> <p>Caracter\u00edsticas do modelo:</p> <ul> <li>Leve: 80MB</li> <li>R\u00e1pido: ~50 chunks/segundo em CPU</li> <li>Eficiente: 384 dimens\u00f5es (vs 768 ou 1536)</li> <li>Multil\u00edngue: Suporta portugu\u00eas</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#5-armazenamento-vetorial","title":"5. Armazenamento Vetorial","text":"<p>LangChain + pgvector:</p> <pre><code>vector_store = PGVector(\n    embeddings=embeddings_model,\n    connection=database_url,\n    collection_name=\"ragbot_chunks\",\n    distance_strategy=DistanceStrategy.COSINE\n)\n\nvector_store.add_documents(chunks)\n</code></pre> <p>O que acontece internamente:</p> <ul> <li>Chunks s\u00e3o inseridos em <code>langchain_pg_embedding</code></li> <li>\u00cdndice HNSW \u00e9 atualizado automaticamente</li> <li>Metadados s\u00e3o salvos como JSONB</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#6-metadados-do-documento","title":"6. Metadados do Documento","text":"<p>Salvo em <code>documents</code>:</p> <pre><code>doc_id = document_repository.save_document_metadata(\n    filename=\"ata_reuniao_2024.pdf\",\n    chunks_count=45,\n    file_size_bytes=2048576\n)\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#fluxo-de-busca-e-resposta","title":"Fluxo de Busca e Resposta","text":"<p>Quando o usu\u00e1rio faz uma pergunta, o sistema executa:</p> <pre><code>sequenceDiagram\n    participant User as Usu\u00e1rio\n    participant API as FastAPI\n    participant Service as ChatService\n    participant Embed as Sentence Transformer\n    participant Vec as pgvector\n    participant Gemini as Gemini AI\n    participant DB as PostgreSQL\n\n    User-&gt;&gt;API: POST /ask {message, max_chunks}\n    API-&gt;&gt;Service: process_chat()\n\n    Service-&gt;&gt;Embed: Embedar pergunta\n    Embed--&gt;&gt;Service: Vector 384-dim\n\n    Service-&gt;&gt;Vec: similarity_search(vector, k=max_chunks)\n    Vec-&gt;&gt;Vec: Busca HNSW por cosseno\n    Vec--&gt;&gt;Service: Top-k chunks + scores\n\n    Service-&gt;&gt;Service: Construir prompt\n    Note over Service: Prompt = instru\u00e7\u00f5es + chunks + pergunta\n\n    Service-&gt;&gt;Gemini: generate_content(prompt)\n    Gemini-&gt;&gt;Gemini: Processar e gerar resposta\n    Gemini--&gt;&gt;Service: Resposta em texto\n\n    Service-&gt;&gt;DB: Salvar conversa/mensagem\n    Service-&gt;&gt;DB: Salvar source_chunks\n    DB--&gt;&gt;Service: IDs salvos\n\n    Service--&gt;&gt;API: ChatResponse\n    API--&gt;&gt;User: {response, sources, conversation_id}</code></pre>"},{"location":"Arquitetura/rag-pipeline/#1-recepcao-da-pergunta","title":"1. Recep\u00e7\u00e3o da Pergunta","text":"<p>Endpoint: <code>POST /ask</code></p> <pre><code>{\n  \"message\": \"Quais foram as decis\u00f5es da reuni\u00e3o de mar\u00e7o?\",\n  \"max_chunks\": 5,\n  \"conversation_id\": null  // opcional\n}\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#2-embedding-da-pergunta","title":"2. Embedding da Pergunta","text":"<pre><code>query_vector = embeddings_model.encode(user_message)\n# Mesmo modelo usado na ingest\u00e3o\n</code></pre> <p>Importante: Mesmo modelo para query e documentos garante consist\u00eancia sem\u00e2ntica.</p>"},{"location":"Arquitetura/rag-pipeline/#3-busca-por-similaridade","title":"3. Busca por Similaridade","text":"<pre><code>results = vector_store.similarity_search_with_score(\n    query=user_message,\n    k=max_chunks\n)\n\n# Retorna: [(document, score), ...]\n# score = 1 - cosine_distance (0-1, maior \u00e9 melhor)\n</code></pre> <p>Algoritmo de busca:</p> <ol> <li>pgvector calcula dist\u00e2ncia cosseno entre query e todos embeddings</li> <li>HNSW navega grafo para encontrar vizinhos mais pr\u00f3ximos</li> <li>Retorna top-k chunks com maior similaridade</li> </ol> <p>Exemplo de resultado: <pre><code>[\n  {\n    'content': 'Na reuni\u00e3o de mar\u00e7o foi decidido...',\n    'document_name': 'ata_marco_2024.pdf',\n    'similarity_score': 0.87\n  },\n  {\n    'content': 'O conselho aprovou a proposta de...',\n    'document_name': 'ata_marco_2024.pdf',\n    'similarity_score': 0.82\n  }\n]\n</code></pre></p>"},{"location":"Arquitetura/rag-pipeline/#4-construcao-do-prompt","title":"4. Constru\u00e7\u00e3o do Prompt","text":"<pre><code>def _build_prompt(user_question, relevant_chunks):\n    context = \"\\n\\n\".join([\n        f\"Documento: {chunk['document_name']}\\n\"\n        f\"Conte\u00fado: {chunk['content']}\"\n        for chunk in relevant_chunks\n    ])\n\n    prompt = f\"\"\"\n    Voc\u00ea \u00e9 um assistente especializado em responder perguntas \n    baseadas exclusivamente no conte\u00fado dos documentos fornecidos.\n\n    INSTRU\u00c7\u00d5ES:\n    1. Responda APENAS com base nos documentos fornecidos\n    2. Se n\u00e3o houver informa\u00e7\u00e3o suficiente, diga claramente\n    3. Cite sempre os documentos utilizados\n    4. Seja preciso e objetivo\n\n    CONTEXTO DOS DOCUMENTOS:\n    {context}\n\n    PERGUNTA DO USU\u00c1RIO:\n    {user_question}\n\n    RESPOSTA:\n    \"\"\"\n    return prompt\n</code></pre> <p>Componentes do prompt:</p> <ul> <li>System instructions: Diretrizes de comportamento</li> <li>Context: Chunks relevantes recuperados</li> <li>Query: Pergunta do usu\u00e1rio</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#5-geracao-com-gemini","title":"5. Gera\u00e7\u00e3o com Gemini","text":"<pre><code>model = genai.GenerativeModel('gemini-2.5-flash')\nresponse = model.generate_content(prompt)\nanswer = response.text\n</code></pre> <p>Par\u00e2metros do Gemini:</p> <ul> <li>Modelo: gemini-2.5-flash (r\u00e1pido e eficiente)</li> <li>Temperature: Padr\u00e3o (balanceado)</li> <li>Max tokens: Autom\u00e1tico</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#6-persistencia-da-resposta","title":"6. Persist\u00eancia da Resposta","text":"<pre><code># Salvar conversa (se nova)\nconversation_id = create_conversation()\n\n# Salvar mensagem do usu\u00e1rio\nuser_msg_id = save_message(\n    conversation_id, \n    role='user', \n    content=user_message\n)\n\n# Salvar resposta do assistente\nassistant_msg_id = save_message(\n    conversation_id,\n    role='assistant',\n    content=answer\n)\n\n# Salvar chunks usados como fonte\nfor chunk in relevant_chunks:\n    save_source_chunk(\n        message_id=assistant_msg_id,\n        chunk_content=chunk['content'],\n        document_name=chunk['document_name'],\n        similarity_score=chunk['similarity_score']\n    )\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#7-retorno-ao-usuario","title":"7. Retorno ao Usu\u00e1rio","text":"<pre><code>{\n  \"response\": \"Na reuni\u00e3o de mar\u00e7o de 2024 foram decididos...\",\n  \"conversation_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n  \"message_id\": \"789e4567-e89b-12d3-a456-426614174001\",\n  \"sources\": [\n    {\n      \"content\": \"Na reuni\u00e3o de mar\u00e7o foi decidido...\",\n      \"document_name\": \"ata_marco_2024.pdf\",\n      \"similarity_score\": 0.87\n    }\n  ],\n  \"processing_time\": 2.34\n}\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#parametros-configuraveis","title":"Par\u00e2metros Configur\u00e1veis","text":""},{"location":"Arquitetura/rag-pipeline/#chunking","title":"Chunking","text":"<pre><code>CHUNK_SIZE = 1000        # Tamanho do chunk em caracteres\nCHUNK_OVERLAP = 150      # Overlap entre chunks\n</code></pre> <p>Trade-offs:</p> <ul> <li>Chunks maiores: Mais contexto, menos precis\u00e3o na busca</li> <li>Chunks menores: Mais precis\u00e3o, risco de perder contexto</li> <li>Overlap maior: Mais redund\u00e2ncia, evita perda de informa\u00e7\u00e3o</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#busca","title":"Busca","text":"<pre><code>max_chunks = 5  # Quantidade de chunks a recuperar (1-10)\n</code></pre> <p>Trade-offs:</p> <ul> <li>Mais chunks: Mais contexto, resposta mais completa, mais lento</li> <li>Menos chunks: Mais r\u00e1pido, resposta mais focada, risco de perder info</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#modelo-de-embeddings","title":"Modelo de Embeddings","text":"<pre><code>EMBEDDING_MODEL_NAME = \"all-MiniLM-L6-v2\"\n</code></pre> <p>Alternativas poss\u00edveis:</p> <ul> <li><code>all-mpnet-base-v2</code>: Mais preciso, 420MB, 768 dims</li> <li><code>paraphrase-multilingual-MiniLM-L12-v2</code>: Melhor para PT-BR</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#otimizacoes-implementadas","title":"Otimiza\u00e7\u00f5es Implementadas","text":""},{"location":"Arquitetura/rag-pipeline/#cache-do-modelo","title":"Cache do Modelo","text":"<p>Modelo carregado uma vez na inicializa\u00e7\u00e3o:</p> <pre><code>class ChatService:\n    def __init__(self):\n        self.model = SentenceTransformer(EMBEDDING_MODEL_NAME)\n        # Reutilizado para todas as requisi\u00e7\u00f5es\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#busca-assincrona","title":"Busca Ass\u00edncrona","text":"<p>FastAPI permite opera\u00e7\u00f5es n\u00e3o bloqueantes:</p> <pre><code>async def process_chat(...):\n    # N\u00e3o bloqueia outras requisi\u00e7\u00f5es\n    chunks = await vector_store.similarity_search(...)\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#indices-hnsw","title":"\u00cdndices HNSW","text":"<p>pgvector cria \u00edndices otimizados automaticamente:</p> <ul> <li>Busca aproximada em tempo logar\u00edtmico</li> <li>Performance consistente mesmo com milh\u00f5es de vetores</li> </ul>"},{"location":"Arquitetura/rag-pipeline/#truncamento-de-fontes","title":"Truncamento de Fontes","text":"<p>Chunks retornados ao frontend s\u00e3o truncados:</p> <pre><code>SourceChunk(\n    content=chunk['content'][:200] + \"...\"  # Primeiros 200 chars\n)\n</code></pre> <p>Benef\u00edcio: Reduz payload HTTP sem perder informa\u00e7\u00e3o essencial.</p>"},{"location":"Arquitetura/rag-pipeline/#medicao-de-performance","title":"Medi\u00e7\u00e3o de Performance","text":""},{"location":"Arquitetura/rag-pipeline/#ingestao","title":"Ingest\u00e3o","text":"PDF P\u00e1ginas Chunks Tempo Pequeno 1 4 ~0.3s M\u00e9dio 13 39 ~1.5s Grande 54 130 ~5.2s"},{"location":"Arquitetura/rag-pipeline/#respostas","title":"Respostas","text":"Tempo Score de Similaridade ~4.4s ~0.5"},{"location":"Arquitetura/rag-pipeline/#tratamento-de-casos-especiais","title":"Tratamento de Casos Especiais","text":""},{"location":"Arquitetura/rag-pipeline/#sem-documentos-relevantes","title":"Sem Documentos Relevantes","text":"<pre><code>if not relevant_chunks:\n    response_text = (\n        \"Desculpe, n\u00e3o encontrei informa\u00e7\u00f5es relevantes \"\n        \"nos documentos dispon\u00edveis para responder sua pergunta.\"\n    )\n    source_chunks = []\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#multiplas-fontes","title":"M\u00faltiplas Fontes","text":"<p>Sistema automaticamente cita todos os documentos usados:</p> <pre><code>sources = [\n  {\"document_name\": \"ata_2024_01.pdf\", \"score\": 0.89},\n  {\"document_name\": \"ata_2024_03.pdf\", \"score\": 0.84}\n]\n</code></pre>"},{"location":"Arquitetura/rag-pipeline/#respostas-longas","title":"Respostas Longas","text":"<p>Gemini pode gerar respostas extensas se necess\u00e1rio, mas \u00e9 instru\u00eddo a ser objetivo.</p>"},{"location":"Arquitetura/rag-pipeline/#qualidade-das-respostas","title":"Qualidade das Respostas","text":""},{"location":"Arquitetura/rag-pipeline/#estrategias-de-prompt","title":"Estrat\u00e9gias de Prompt","text":"<p>Instru\u00e7\u00f5es claras:</p> <ul> <li>Responder apenas com base nos documentos</li> <li>Citar fontes</li> <li>Admitir quando n\u00e3o sabe</li> </ul> <p>Exemplo de resposta ideal:</p> <p>\"Segundo a ata da reuni\u00e3o de mar\u00e7o de 2024, foram aprovadas tr\u00eas propostas: [lista]. Esta informa\u00e7\u00e3o consta no documento ata_marco_2024.pdf.\"</p>"},{"location":"Arquitetura/rag-pipeline/#validacao","title":"Valida\u00e7\u00e3o","text":"<p>Sistema valida se chunks recuperados s\u00e3o realmente relevantes atrav\u00e9s do similarity score m\u00ednimo (impl\u00edcito no top-k).</p>"},{"location":"Processo/git-flow/","title":"Git Flow e Colabora\u00e7\u00e3o","text":""},{"location":"Processo/git-flow/#estrategia-de-versionamento","title":"Estrat\u00e9gia de Versionamento","text":"<p>O projeto utilizou Git Flow adaptado para uma equipe de 2 desenvolvedores, combinando trabalho s\u00edncrono e ass\u00edncrono de forma eficiente.</p>"},{"location":"Processo/git-flow/#estrutura-de-branches","title":"Estrutura de Branches","text":""},{"location":"Processo/git-flow/#branch-principal","title":"Branch Principal","text":"<p><code>main</code></p> <ul> <li>C\u00f3digo de produ\u00e7\u00e3o est\u00e1vel</li> <li>Apenas aceita merges via Pull Request</li> <li>Protegida contra commits diretos</li> </ul>"},{"location":"Processo/git-flow/#branches-de-feature","title":"Branches de Feature","text":"<p>Padr\u00e3o: <code>feature/&lt;nome-da-funcionalidade&gt;</code></p> <p>Exemplos:</p> <ul> <li><code>feature/vector-search</code></li> <li><code>feature/chat-interface</code></li> <li><code>feature/document-upload</code></li> </ul> <p>Cada issue gerava uma branch isolada, garantindo desenvolvimento independente e seguro.</p>"},{"location":"Processo/git-flow/#fluxo-de-trabalho","title":"Fluxo de Trabalho","text":""},{"location":"Processo/git-flow/#1-sprint-planning","title":"1. Sprint Planning","text":"<p>Na reuni\u00e3o de planning, as tarefas eram organizadas:</p> <ul> <li>Discuss\u00e3o das funcionalidades da sprint</li> <li>Cria\u00e7\u00e3o de issues no GitHub</li> <li>Defini\u00e7\u00e3o de prioridades</li> <li>Atribui\u00e7\u00e3o de responsabilidades</li> </ul>"},{"location":"Processo/git-flow/#2-desenvolvimento-isolado","title":"2. Desenvolvimento Isolado","text":"<p>Cada desenvolvedor:</p> <ul> <li>Escolhe uma issue do backlog</li> <li>Cria branch espec\u00edfica: <code>git checkout -b feature/nome-issue</code></li> <li>Desenvolve a funcionalidade localmente</li> <li>Faz commits frequentes e descritivos</li> </ul> <p>Exemplo de commits:</p> <pre><code>git commit -m \"feat: adiciona busca vetorial com pgvector\"\ngit commit -m \"fix: corrige encoding de PDFs com acentua\u00e7\u00e3o\"\ngit commit -m \"docs: atualiza README com instru\u00e7\u00f5es de setup\"\n</code></pre>"},{"location":"Processo/git-flow/#3-pull-request","title":"3. Pull Request","text":"<p>Ao finalizar a funcionalidade:</p> <p>Abertura do PR:</p> <ul> <li>Desenvolver push da branch para o reposit\u00f3rio</li> <li>Abre Pull Request no GitHub</li> <li>Descreve as mudan\u00e7as realizadas</li> <li>Referencia a issue relacionada</li> </ul> <p>Exemplo de descri\u00e7\u00e3o:</p> <pre><code>## \ud83d\udd17 Issue Relacionada\nCloses #3 \n\n## \ud83d\udccb Descri\u00e7\u00e3o\nFoi finalizada a implementa\u00e7\u00e3o da feature de resposta do chat, utilizando langChain para gerar as queries para o banco de dados, e a API do gemini para gerar a resposta final para o usu\u00e1rio\n\n## \ud83d\udd27 Tipo de Altera\u00e7\u00e3o\n- [x] \ud83c\udd95 **Feature** - Nova funcionalidade\n- [ ] \ud83d\udc1b **Bug Fix** - Corre\u00e7\u00e3o de bug\n- [ ] \ud83d\udcda **Documenta\u00e7\u00e3o** - Melhoria na documenta\u00e7\u00e3o\n- [ ] \ud83e\uddea **Testes** - Adi\u00e7\u00e3o ou corre\u00e7\u00e3o de testes\n- [ ] \u267b\ufe0f **Refatora\u00e7\u00e3o** - Melhoria no c\u00f3digo sem mudan\u00e7a de funcionalidade\n- [ ] \ud83d\ude80 **Deploy** - Relacionado a deploy e infraestrutura\n- [ ] \ud83d\udce6 **Depend\u00eancias** - Atualiza\u00e7\u00e3o de depend\u00eancias\n</code></pre>"},{"location":"Processo/git-flow/#4-code-review","title":"4. Code Review","text":"<p>O outro desenvolvedor revisa o c\u00f3digo:</p> <p>Checklist de Revis\u00e3o:</p> <ul> <li>C\u00f3digo est\u00e1 leg\u00edvel e bem organizado?</li> <li>Funcionalidade atende aos crit\u00e9rios de aceite?</li> <li>Testes foram adicionados/atualizados?</li> <li>Documenta\u00e7\u00e3o foi atualizada?</li> <li>N\u00e3o h\u00e1 bugs evidentes?</li> </ul> <p>A\u00e7\u00f5es poss\u00edveis:</p> <ul> <li>Aprovar: Se tudo estiver ok</li> <li>Solicitar mudan\u00e7as: Se houver problemas</li> <li>Comentar: Para d\u00favidas ou sugest\u00f5es</li> </ul>"},{"location":"Processo/git-flow/#5-merge","title":"5. Merge","text":"<p>Ap\u00f3s aprova\u00e7\u00e3o:</p> <ul> <li>Resolve conflitos (se houver)</li> <li>Merge da branch para <code>main</code></li> <li>Delete da branch de feature</li> <li>Fecha a issue automaticamente</li> </ul>"},{"location":"Processo/git-flow/#trabalho-sincrono-vs-assincrono","title":"Trabalho S\u00edncrono vs Ass\u00edncrono","text":""},{"location":"Processo/git-flow/#desenvolvimento-sincrono","title":"Desenvolvimento S\u00edncrono","text":"<p>Quando: Funcionalidades core ou decis\u00f5es arquiteturais</p> <p>Como: Reuni\u00f5es de pair programming</p> <p>Exemplos:</p> <ul> <li>Defini\u00e7\u00e3o da arquitetura do sistema</li> <li>Implementa\u00e7\u00e3o do pipeline RAG</li> <li>Decis\u00f5es sobre modelo de embeddings</li> <li>Estrutura\u00e7\u00e3o do banco de dados</li> </ul> <p>Vantagens:</p> <ul> <li>Decis\u00f5es r\u00e1pidas e consensuais</li> <li>Compartilhamento de conhecimento imediato</li> <li>Menos erros de comunica\u00e7\u00e3o</li> <li>Maior alinhamento t\u00e9cnico</li> </ul>"},{"location":"Processo/git-flow/#desenvolvimento-assincrono","title":"Desenvolvimento Ass\u00edncrono","text":"<p>Quando: Features isoladas e independentes</p> <p>Como: Cada um trabalha em sua issue</p> <p>Exemplos:</p> <ul> <li>Estiliza\u00e7\u00e3o de componentes frontend</li> <li>Cria\u00e7\u00e3o de endpoints REST</li> <li>Escrita de testes unit\u00e1rios</li> <li>Documenta\u00e7\u00e3o t\u00e9cnica</li> </ul> <p>Vantagens:</p> <ul> <li>Flexibilidade de hor\u00e1rios</li> <li>Desenvolvimento paralelo de m\u00faltiplas features</li> <li>Foco individual em cada tarefa</li> <li>Progresso cont\u00ednuo</li> </ul>"},{"location":"Processo/git-flow/#organizacao-por-issues","title":"Organiza\u00e7\u00e3o por Issues","text":""},{"location":"Processo/git-flow/#anatomia-de-uma-issue","title":"Anatomia de uma Issue","text":"<p>T\u00edtulo: Claro e objetivo</p> <pre><code>Implementar busca sem\u00e2ntica com pgvector\n</code></pre> <p>Descri\u00e7\u00e3o:</p> <pre><code>## \ud83d\udccb Descri\u00e7\u00e3o\nConfigurar o ambiente de teste e implementar testes no fluxo de ingest\u00e3o de documentos, fazendo valida\u00e7\u00f5es\n\n## \ud83d\udd27 Tipo de Altera\u00e7\u00e3o\n&lt;!-- Marque o tipo principal desta issue --&gt;\n- [ ] \ud83c\udd95 **Feature** - Nova funcionalidade\n- [ ] \ud83d\udc1b **Bug Fix** - Corre\u00e7\u00e3o de bug\n- [ ] \ud83d\udcda **Documenta\u00e7\u00e3o** - Melhoria na documenta\u00e7\u00e3o\n- [x] \ud83e\uddea **Testes** - Adi\u00e7\u00e3o ou corre\u00e7\u00e3o de testes\n- [ ] \u267b\ufe0f **Refatora\u00e7\u00e3o** - Melhoria no c\u00f3digo sem mudan\u00e7a de funcionalidade\n- [ ] \ud83d\ude80 **Deploy** - Relacionado a deploy e infraestrutura\n- [ ] \ud83d\udd27 **Manuten\u00e7\u00e3o** - Tarefas de manuten\u00e7\u00e3o e limpeza\n- [ ] \ud83d\udce6 **Depend\u00eancias** - Atualiza\u00e7\u00e3o de depend\u00eancias\n- [ ] \ud83c\udfa8 **UI/UX** - Melhorias na interface\n- [ ] \u26a1 **Performance** - Melhorias de performance\n\n##Tarefas\n- [ ] Configurar o ambiente de teste\n- [ ] Implementar testes unit\u00e1rios para garantir a efic\u00e1cia do sistema\n- [ ] Verificar se o documento PDF \u00e9 lido pelo python\n- [ ] Verificar se o documento \u00e9 transformado em chunks pela biblioteca LangChain\n- [ ] Verificar se s\u00e3o gerados embeddings de 384 dimens\u00f5es pelo modelo All-mini-LM-l6-v2\n- [ ] verificar se \u00e9 enviado para o banco\n</code></pre>"},{"location":"Processo/git-flow/#vinculacao-ao-kanban","title":"Vincula\u00e7\u00e3o ao Kanban","text":"<p>Cada issue \u00e9 automaticamente refletida no GitHub Projects:</p> <ul> <li>Criada \u2192 vai para Backlog</li> <li>Assignee definido \u2192 vai para To Do</li> <li>Branch criada \u2192 vai para In Progress</li> <li>PR merged \u2192 vai para Done</li> </ul>"},{"location":"Processo/git-flow/#convencoes-de-commit","title":"Conven\u00e7\u00f5es de Commit","text":"<p>O projeto seguiu Conventional Commits para mensagens padronizadas:</p> <p>Formato:</p> <pre><code>&lt;tipo&gt;(&lt;escopo&gt;): &lt;descri\u00e7\u00e3o&gt;\n\n[corpo opcional]\n\n[footer opcional]\n</code></pre> <p>Tipos:</p> <ul> <li><code>feat</code>: Nova funcionalidade</li> <li><code>fix</code>: Corre\u00e7\u00e3o de bug</li> <li><code>docs</code>: Documenta\u00e7\u00e3o</li> <li><code>style</code>: Formata\u00e7\u00e3o, espa\u00e7amento</li> <li><code>refactor</code>: Refatora\u00e7\u00e3o de c\u00f3digo</li> <li><code>test</code>: Adi\u00e7\u00e3o de testes</li> <li><code>chore</code>: Tarefas de build, configura\u00e7\u00e3o</li> </ul> <p>Exemplos:</p> <pre><code>feat(api): adiciona endpoint de upload de documentos\n\nfix(chat): corrige exibi\u00e7\u00e3o de mensagens longas\n\ndocs(readme): atualiza instru\u00e7\u00f5es de instala\u00e7\u00e3o\n\nrefactor(services): extrai l\u00f3gica de prompt para fun\u00e7\u00e3o separada\n</code></pre>"},{"location":"Processo/git-flow/#revisao-de-codigo","title":"Revis\u00e3o de C\u00f3digo","text":""},{"location":"Processo/git-flow/#beneficios-do-code-review","title":"Benef\u00edcios do Code Review","text":"<p>Qualidade:</p> <ul> <li>Detec\u00e7\u00e3o precoce de bugs</li> <li>Sugest\u00f5es de melhorias</li> <li>Manuten\u00e7\u00e3o de padr\u00f5es de c\u00f3digo</li> </ul> <p>Conhecimento:</p> <ul> <li>Ambos conhecem todo o c\u00f3digo</li> <li>Transfer\u00eancia de conhecimento cont\u00ednua</li> <li>Menos risco de \"c\u00f3digo propriet\u00e1rio\"</li> </ul> <p>Colabora\u00e7\u00e3o:</p> <ul> <li>Discuss\u00f5es t\u00e9cnicas construtivas</li> <li>Alinhamento de abordagens</li> <li>Senso de propriedade coletiva</li> </ul>"},{"location":"Processo/git-flow/#processo-de-revisao","title":"Processo de Revis\u00e3o","text":"<ol> <li>Revisor l\u00ea a descri\u00e7\u00e3o do PR</li> <li>Entende o contexto da mudan\u00e7a</li> <li>Analisa o c\u00f3digo linha por linha</li> <li>Testa localmente (se necess\u00e1rio)</li> <li>Deixa coment\u00e1rios construtivos</li> <li>Aprova ou solicita mudan\u00e7as</li> </ol>"},{"location":"Processo/git-flow/#resolucao-de-conflitos","title":"Resolu\u00e7\u00e3o de Conflitos","text":"<p>Estrat\u00e9gia: Resolver conflitos sempre que poss\u00edvel localmente antes do merge.</p> <p>Processo:</p> <pre><code># Atualizar branch com main\ngit checkout feature/minha-feature\ngit pull origin main\n\n# Resolver conflitos manualmente\n# Testar que tudo funciona\n\ngit add .\ngit commit -m \"merge: resolve conflitos com main\"\ngit push\n</code></pre>"},{"location":"Processo/git-flow/#protecao-da-branch-main","title":"Prote\u00e7\u00e3o da Branch Main","text":"<p>Regras configuradas:</p> <ul> <li>\u2705 Pull Request obrigat\u00f3rio para merge</li> <li>\u2705 Pelo menos 1 aprova\u00e7\u00e3o necess\u00e1ria</li> <li>\u2705 CI/CD deve passar antes do merge</li> <li>\u2705 Branch deve estar atualizada com main</li> </ul> <p>Essas prote\u00e7\u00f5es garantem que c\u00f3digo n\u00e3o testado ou n\u00e3o revisado nunca chegue \u00e0 produ\u00e7\u00e3o.</p>"},{"location":"Processo/git-flow/#ferramentas-utilizadas","title":"Ferramentas Utilizadas","text":"<p>GitHub:</p> <ul> <li>Reposit\u00f3rios Git</li> <li>Issues e Projects</li> <li>Pull Requests</li> <li>Actions (CI/CD)</li> </ul> <p>VS Code:</p> <ul> <li>GitLens: Visualiza\u00e7\u00e3o de hist\u00f3rico</li> <li>Git Graph: Visualiza\u00e7\u00e3o de branches</li> <li>GitHub Pull Requests: Revis\u00e3o no editor</li> </ul>"},{"location":"Processo/git-flow/#boas-praticas-implementadas","title":"Boas Pr\u00e1ticas Implementadas","text":"<p>Commits Pequenos:</p> <p>Commits frequentes e focados facilitam revis\u00e3o e debug.</p> <p>Branches Curtas:</p> <p>Features eram desenvolvidas em 1-3 dias, evitando branches longas e conflitos.</p> <p>Descri\u00e7\u00f5es Claras:</p> <p>PRs sempre tinham contexto, mudan\u00e7as e testes descritos.</p> <p>Testes Antes do Merge:</p> <p>Funcionalidade era testada localmente antes de abrir PR.</p> <p>Delete de Branches:</p> <p>Branches mergeadas eram deletadas para manter reposit\u00f3rio limpo.</p>"},{"location":"Processo/metodologia/","title":"Metodologia de Desenvolvimento","text":""},{"location":"Processo/metodologia/#metodologia-agil-scrum","title":"Metodologia \u00c1gil - Scrum","text":"<p>O projeto foi desenvolvido utilizando Scrum, um framework \u00e1gil que organiza o trabalho em ciclos curtos e iterativos, promovendo entregas incrementais e adapta\u00e7\u00e3o cont\u00ednua.</p>"},{"location":"Processo/metodologia/#estrutura-das-sprints","title":"Estrutura das Sprints","text":"<p>Dura\u00e7\u00e3o: 15 dias (2 semanas)</p> <p>Atividades por Sprint:</p> <ul> <li>Planning: Defini\u00e7\u00e3o das tarefas e cria\u00e7\u00e3o de issues no GitHub</li> <li>Desenvolvimento: Implementa\u00e7\u00e3o das funcionalidades planejadas</li> <li>Review: Valida\u00e7\u00e3o das entregas e testes</li> <li>Retrospectiva: Discuss\u00e3o de melhorias para a pr\u00f3xima sprint</li> </ul>"},{"location":"Processo/metodologia/#equipe","title":"Equipe","text":"<p>O time era composto por 2 desenvolvedores que compartilhavam todas as responsabilidades:</p> <ul> <li>Planejamento das sprints</li> <li>Divis\u00e3o de tarefas</li> <li>Desenvolvimento do c\u00f3digo</li> <li>Revis\u00e3o de c\u00f3digo (code review)</li> <li>Testes e valida\u00e7\u00e3o</li> </ul>"},{"location":"Processo/metodologia/#github-projects","title":"GitHub Projects","text":"<p>Para organizar o trabalho, utilizamos o GitHub Projects.</p>"},{"location":"Processo/metodologia/#estrutura-do-quadro","title":"Estrutura do Quadro","text":"<p>O quadro foi dividido em 3 colunas principais:</p> <ul> <li>To Do: Tarefas da sprint atual</li> <li>In Progress: Issues em desenvolvimento</li> <li>Done: Tarefas conclu\u00eddas e revisadas</li> </ul>"},{"location":"Processo/metodologia/#fluxo-de-trabalho","title":"Fluxo de Trabalho","text":"<ol> <li>Planning: Issues criadas e movidas para \"To Do\"</li> <li>Desenvolvimento: Developer move issue para \"In Progress\"</li> <li>Code Review: PR aberto, parceiro revisa</li> <li>Conclus\u00e3o: Ap\u00f3s merge, issue vai para \"Done\"</li> </ol>"},{"location":"Processo/metodologia/#vantagens","title":"Vantagens","text":"<ul> <li>Visibilidade: Todos sabem o status de cada tarefa</li> <li>Organiza\u00e7\u00e3o: Prioriza\u00e7\u00e3o clara do que fazer</li> <li>Hist\u00f3rico: Rastreamento de tudo que foi desenvolvido</li> <li>M\u00e9tricas: Acompanhamento de velocity e produtividade</li> </ul>"},{"location":"Processo/metodologia/#cerimonias-do-scrum","title":"Cerim\u00f4nias do Scrum","text":""},{"location":"Processo/metodologia/#sprint-planning","title":"Sprint Planning","text":"<p>Quando: In\u00edcio de cada sprint (a cada 15 dias)</p> <p>Atividades:</p> <ul> <li>Revis\u00e3o do backlog</li> <li>Sele\u00e7\u00e3o de funcionalidades para a sprint</li> <li>Cria\u00e7\u00e3o de issues no GitHub</li> <li>Estimativa de esfor\u00e7o</li> <li>Defini\u00e7\u00e3o de crit\u00e9rios de aceite</li> </ul>"},{"location":"Processo/metodologia/#organizacao-por-issues","title":"Organiza\u00e7\u00e3o por Issues","text":"<p>Cada funcionalidade ou melhoria era representada por uma issue no GitHub.</p>"},{"location":"Processo/metodologia/#exemplos-de-issues","title":"Exemplos de Issues","text":"<ul> <li>\"Implementar busca sem\u00e2ntica com pgvector\"</li> <li>\"Criar interface de chat responsiva\"</li> <li>\"Adicionar endpoint de upload de documentos\"</li> </ul>"},{"location":"Processo/metodologia/#comunicacao","title":"Comunica\u00e7\u00e3o","text":"<ul> <li>WhatsApp/Discord: Comunica\u00e7\u00e3o r\u00e1pida</li> <li>GitHub Discussions: Decis\u00f5es t\u00e9cnicas</li> <li>Discord: Reuni\u00f5es s\u00edncronas</li> </ul>"},{"location":"Processo/metodologia/#adaptacoes-do-scrum","title":"Adapta\u00e7\u00f5es do Scrum","text":"<p>Por ser uma equipe pequena e acad\u00eamica, algumas adapta\u00e7\u00f5es foram feitas:</p> <p>Flexibilidade:</p> <ul> <li>Sem dailies formais di\u00e1rias</li> <li>Comunica\u00e7\u00e3o ass\u00edncrona quando poss\u00edvel</li> <li>Reuni\u00f5es s\u00edncronas para decis\u00f5es importantes</li> </ul> <p>Pragmatismo:</p> <ul> <li>Foco em entregas funcionais</li> <li>Documenta\u00e7\u00e3o cont\u00ednua mas enxuta</li> <li>Testes manuais complementando automatizados</li> </ul> <p>Colabora\u00e7\u00e3o:</p> <ul> <li>Pair programming para funcionalidades complexas</li> <li>Code review obrigat\u00f3rio em todos os PRs</li> <li>Compartilhamento de conhecimento constante</li> </ul> <p>Essa abordagem permitiu manter a agilidade do Scrum adaptada \u00e0 realidade do projeto acad\u00eamico, garantindo entregas consistentes e qualidade do c\u00f3digo.</p>"},{"location":"Processo/requisitos/","title":"Requisitos do Sistema","text":""},{"location":"Processo/requisitos/#persona-principal","title":"Persona Principal","text":""},{"location":"Processo/requisitos/#ana-22-anos-estudante-de-graduacao","title":"Ana, 22 anos - Estudante de Gradua\u00e7\u00e3o","text":"<p>Perfil:</p> <p>Ana participa de reuni\u00f5es do centro acad\u00eamico e frequentemente precisa consultar atas e documentos institucionais. Ela deseja respostas r\u00e1pidas, sem precisar explorar documentos extensos. Utiliza majoritariamente o celular e valoriza interfaces simples, diretas e intuitivas.</p> <p>Necessidades:</p> <ul> <li>Obter respostas diretas em linguagem natural</li> <li>Visualizar os trechos dos documentos que justificam as respostas</li> <li>Utilizar o sistema por meio de dispositivos m\u00f3veis</li> </ul> <p>Objetivos:</p> <ul> <li>Economizar tempo em buscas manuais</li> <li>Confiar nas informa\u00e7\u00f5es apresentadas</li> <li>Acessar o sistema de qualquer lugar</li> </ul>"},{"location":"Processo/requisitos/#requisitos-funcionais","title":"Requisitos Funcionais","text":"<p>Os requisitos funcionais descrevem os comportamentos esperados do sistema:</p> <p>RF01 - Perguntas em Linguagem Natural</p> <p>O sistema deve permitir ao usu\u00e1rio inserir perguntas em linguagem natural.</p> <p>RF02 - Respostas Baseadas em Documentos</p> <p>O sistema deve retornar respostas com base em documentos previamente indexados.</p> <p>RF03 - Hist\u00f3rico de Intera\u00e7\u00f5es</p> <p>O sistema deve exibir o hist\u00f3rico de intera\u00e7\u00f5es no chat.</p> <p>RF04 - Recupera\u00e7\u00e3o de Trechos</p> <p>O sistema deve recuperar os trechos dos documentos que embasam a resposta.</p>"},{"location":"Processo/requisitos/#requisitos-nao-funcionais","title":"Requisitos N\u00e3o Funcionais","text":"<p>Os requisitos n\u00e3o funcionais descrevem atributos de qualidade do sistema:</p> <p>RNF01 - Performance</p> <p>O sistema deve apresentar respostas em at\u00e9 5 segundos.</p> <p>RNF02 - Responsividade</p> <p>A interface deve ser responsiva e acess\u00edvel em dispositivos m\u00f3veis.</p> <p>RNF03 - Rastreabilidade</p> <p>O sistema deve permitir rastreabilidade entre resposta e documento de origem.</p> <p>RNF04 - Persist\u00eancia</p> <p>O sistema deve manter persist\u00eancia de dados utilizando PostgreSQL com pgvector.</p>"},{"location":"Processo/requisitos/#user-stories","title":"User Stories","text":"<p>As funcionalidades foram especificadas atrav\u00e9s de User Stories, seguindo o formato: \"Como [persona], quero [funcionalidade], para [benef\u00edcio]\".</p>"},{"location":"Processo/requisitos/#tabela-de-user-stories","title":"Tabela de User Stories","text":"ID Persona Objetivo Benef\u00edcio Crit\u00e9rios de Aceite US01 Lionel Inserir perguntas em linguagem natural Obter respostas sem ler documentos extensos A pergunta \u00e9 compreendida e respondida com base nos documentos US02 Caio Ver os trechos dos documentos que justificam as respostas Validar a confiabilidade da informa\u00e7\u00e3o apresentada O sistema exibe as passagens documentais usadas na gera\u00e7\u00e3o da resposta US03 Pedro Revisar hist\u00f3rico de perguntas e respostas Retomar informa\u00e7\u00f5es anteriores com facilidade As intera\u00e7\u00f5es s\u00e3o armazenadas e podem ser acessadas posteriormente em uma mesma intera\u00e7\u00e3o US04 Alice Verificar documentos dispon\u00edveis Saber de quais assuntos o sistema possui conhecimento O frontend deve exibir os documentos cadastrados no banco de dados US05 Desenvolvedor Cadastrar novos documentos no sistema Manter o sistema atualizado com resolu\u00e7\u00f5es recentes O upload \u00e9 processado com sucesso e o documento aparece na base de consulta US06 Desenvolvedor Verificar se o documento foi corretamente indexado Garantir a disponibilidade da informa\u00e7\u00e3o O sistema confirma a indexa\u00e7\u00e3o e permite consulta via busca sem\u00e2ntica US07 Desenvolvedor Ter um sistema modular Facilitar manuten\u00e7\u00e3o e evolu\u00e7\u00e3o futura Os m\u00f3dulos est\u00e3o organizados com baixo acoplamento e responsabilidade definida"},{"location":"Processo/requisitos/#priorizacao-de-requisitos","title":"Prioriza\u00e7\u00e3o de Requisitos","text":"<p>Os requisitos foram priorizados seguindo o crit\u00e9rio de valor entregue ao usu\u00e1rio:</p>"},{"location":"Processo/requisitos/#alta-prioridade","title":"Alta Prioridade","text":"<ul> <li>RF01, RF02, RF04: Core do sistema RAG</li> <li>RNF01, RNF04: Performance e persist\u00eancia essenciais</li> <li>US01, US02: Funcionalidades principais</li> </ul>"},{"location":"Processo/requisitos/#media-prioridade","title":"M\u00e9dia Prioridade","text":"<ul> <li>RF03: Hist\u00f3rico melhora UX mas n\u00e3o \u00e9 cr\u00edtico</li> <li>RNF02: Responsividade importante mas desktop funciona</li> <li>US03, US04: Features complementares</li> </ul>"},{"location":"Processo/requisitos/#baixa-prioridade","title":"Baixa Prioridade","text":"<ul> <li>US05, US06, US07: Funcionalidades para desenvolvedores</li> <li>RNF03: Rastreabilidade desej\u00e1vel mas n\u00e3o bloqueante</li> </ul>"},{"location":"Processo/requisitos/#rastreabilidade","title":"Rastreabilidade","text":""},{"location":"Processo/requisitos/#mapeamento-rf-implementacao","title":"Mapeamento RF \u2192 Implementa\u00e7\u00e3o","text":"<p>RF01 \u2192 Endpoint <code>/ask</code> + Frontend chat input</p> <p>RF02 \u2192 Pipeline RAG (busca vetorial + Gemini)</p> <p>RF03 \u2192 Tabelas <code>conversations</code> e <code>messages</code></p> <p>RF04 \u2192 Tabela <code>message_source_chunks</code> + exibi\u00e7\u00e3o de sources</p>"},{"location":"Processo/requisitos/#mapeamento-rnf-solucao-tecnica","title":"Mapeamento RNF \u2192 Solu\u00e7\u00e3o T\u00e9cnica","text":"<p>RNF01 \u2192 FastAPI ass\u00edncrono + pgvector HNSW + Gemini API</p> <p>RNF02 \u2192 Tailwind CSS + design mobile-first + Vue 3 reativo</p> <p>RNF03 \u2192 Relacionamentos no banco + exibi\u00e7\u00e3o de fontes</p> <p>RNF04 \u2192 PostgreSQL 15 + extens\u00e3o pgvector</p>"},{"location":"Processo/requisitos/#validacao-dos-requisitos","title":"Valida\u00e7\u00e3o dos Requisitos","text":""},{"location":"Processo/requisitos/#criterios-de-aceite","title":"Crit\u00e9rios de Aceite","text":"<p>Cada requisito possui crit\u00e9rios claros de valida\u00e7\u00e3o:</p> <p>Exemplo - RF01:</p> <ul> <li>\u2705 Campo de texto aceita perguntas de at\u00e9 1000 caracteres</li> <li>\u2705 Valida\u00e7\u00e3o no frontend e backend</li> <li>\u2705 Feedback visual ao enviar pergunta</li> </ul> <p>Exemplo - RNF01:</p> <ul> <li>\u2705 Medi\u00e7\u00e3o de tempo de resposta implementada</li> <li>\u2705 95% das consultas respondem em &lt; 5s</li> <li>\u2705 Timeout configurado em 30s</li> </ul>"},{"location":"Processo/requisitos/#testes-de-aceitacao","title":"Testes de Aceita\u00e7\u00e3o","text":"<p>Para cada User Story, foram definidos cen\u00e1rios de teste:</p> <p>US01 - Pergunta em Linguagem Natural:</p> <ul> <li>Usu\u00e1rio digita \"Quais foram as decis\u00f5es de mar\u00e7o?\"</li> <li>Sistema processa e retorna resposta contextualizada</li> <li>Resposta \u00e9 exibida em at\u00e9 5 segundos</li> </ul> <p>US02 - Visualiza\u00e7\u00e3o de Fontes:</p> <ul> <li>Sistema retorna resposta</li> <li>Se\u00e7\u00e3o \"Fontes\" \u00e9 exibida abaixo da resposta</li> <li>Trechos dos documentos s\u00e3o mostrados com nome do arquivo</li> </ul>"},{"location":"Processo/requisitos/#evolucao-dos-requisitos","title":"Evolu\u00e7\u00e3o dos Requisitos","text":"<p>Durante o desenvolvimento, alguns requisitos evolu\u00edram:</p>"},{"location":"Processo/requisitos/#adicoes","title":"Adi\u00e7\u00f5es","text":"<ul> <li>RF05 (impl\u00edcito): Sistema deve suportar m\u00faltiplas conversas simult\u00e2neas</li> <li>RNF05 (impl\u00edcito): Sistema deve ser containerizado para facilitar deploy</li> </ul> <p>Essa flexibilidade \u00e9 caracter\u00edstica do desenvolvimento \u00e1gil, onde requisitos podem ser refinados conforme o aprendizado do time e feedback cont\u00ednuo.</p>"},{"location":"Qualidade/devops/","title":"DevOps e Infraestrutura","text":""},{"location":"Qualidade/devops/#containerizacao-com-docker","title":"Containeriza\u00e7\u00e3o com Docker","text":"<p>O projeto utiliza Docker e Docker Compose para orquestrar os servi\u00e7os, facilitando o desenvolvimento e garantindo consist\u00eancia entre ambientes.</p>"},{"location":"Qualidade/devops/#por-que-docker","title":"Por que Docker?","text":"<p>Isolamento:</p> <ul> <li>Cada servi\u00e7o roda em container pr\u00f3prio</li> <li>Depend\u00eancias isoladas do sistema host</li> <li>Evita conflitos de vers\u00f5es</li> </ul> <p>Portabilidade:</p> <ul> <li>Funciona igual em qualquer m\u00e1quina</li> <li>Setup r\u00e1pido para novos desenvolvedores</li> </ul> <p>Reprodutibilidade:</p> <ul> <li>Ambiente id\u00eantico para todos</li> <li>Vers\u00f5es fixas de PostgreSQL, Python, etc</li> </ul>"},{"location":"Qualidade/devops/#arquitetura-de-containers","title":"Arquitetura de Containers","text":""},{"location":"Qualidade/devops/#servicos-containerizados","title":"Servi\u00e7os Containerizados","text":"<p>Backend (FastAPI):</p> <ul> <li>Container Python 3.11</li> <li>Instala depend\u00eancias do requirements.txt</li> <li>Exp\u00f5e porta 8000</li> </ul> <p>Banco de Dados (PostgreSQL + pgvector):</p> <ul> <li>Imagem oficial pgvector/pgvector:pg16</li> <li>PostgreSQL 16 com extens\u00e3o pgvector</li> <li>Exp\u00f5e porta 5433</li> <li>Volume persistente para dados</li> </ul>"},{"location":"Qualidade/devops/#docker-compose","title":"Docker Compose","text":"<p>O <code>docker-compose.yml</code> orquestra os servi\u00e7os:</p> <pre><code>version: '3.8'\n\nservices:\n  db:\n    image: pgvector/pgvector:pg16\n    container_name: ragbot_db\n    environment:\n      POSTGRES_DB: ragbot_db\n      POSTGRES_USER: tccrag\n      POSTGRES_PASSWORD: tcc123\n    ports:\n      - \"5433:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"Qualidade/devops/#vantagens-do-docker-compose","title":"Vantagens do Docker Compose","text":"<p>Simplicidade:</p> <ul> <li>Um comando para subir tudo: <code>docker-compose up</code></li> <li>Networking autom\u00e1tico entre containers</li> <li>Gerenciamento de volumes centralizado</li> </ul> <p>Desenvolvimento:</p> <ul> <li>Reiniciar servi\u00e7os facilmente</li> <li>Logs centralizados</li> <li>Rebuild r\u00e1pido ap\u00f3s mudan\u00e7as</li> </ul>"},{"location":"Qualidade/devops/#inicializacao-automatica","title":"Inicializa\u00e7\u00e3o Autom\u00e1tica","text":""},{"location":"Qualidade/devops/#script-sql-inicial","title":"Script SQL Inicial","text":"<p>O banco de dados \u00e9 configurado automaticamente na primeira execu\u00e7\u00e3o:</p> <p><code>db/init.sql</code>:</p> <pre><code>CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\nCREATE EXTENSION IF NOT EXISTS \"vector\";\n\nCREATE TABLE conversations (...);\nCREATE TABLE messages (...);\nCREATE TABLE documents (...);\n</code></pre> <p>Processo:</p> <ol> <li>Container do PostgreSQL inicia</li> <li>Script <code>init.sql</code> \u00e9 executado automaticamente</li> <li>Extens\u00f5es e tabelas s\u00e3o criadas</li> <li>Banco fica pronto para uso</li> </ol>"},{"location":"Qualidade/devops/#persistencia-de-dados","title":"Persist\u00eancia de Dados","text":"<p>Volume Docker:</p> <ul> <li>Dados do PostgreSQL persistem entre restarts</li> <li>Localiza\u00e7\u00e3o: Volume <code>postgres_data</code></li> <li>Sobrevive a <code>docker-compose down</code></li> <li>Apagado apenas com <code>docker-compose down -v</code></li> </ul>"},{"location":"Qualidade/devops/#gestao-de-configuracao","title":"Gest\u00e3o de Configura\u00e7\u00e3o","text":""},{"location":"Qualidade/devops/#variaveis-de-ambiente","title":"Vari\u00e1veis de Ambiente","text":"<p>As configura\u00e7\u00f5es s\u00e3o externalizadas atrav\u00e9s de arquivos <code>.env</code>:</p> <p><code>.env.example</code> (template):</p> <pre><code>DATABASE_URL=postgresql://tccrag:tcc123@localhost:5433/ragbot_db\nGEMINI_API_KEY=\nDEBUG=True\nLOG_LEVEL=INFO\n</code></pre> <p><code>.env</code> (desenvolvimento local):</p> <pre><code>DATABASE_URL=postgresql://tccrag:tcc123@db:5432/ragbot_db\nGEMINI_API_KEY=sua-chave-aqui\nDEBUG=True\nLOG_LEVEL=DEBUG\n</code></pre>"},{"location":"Qualidade/devops/#deployment-local","title":"Deployment Local","text":"<p>O projeto foi desenvolvido para execu\u00e7\u00e3o local, sem deploy em produ\u00e7\u00e3o:</p> <p>Justificativa:</p> <ul> <li>Foco no desenvolvimento e aprendizado</li> <li>Projeto acad\u00eamico/TCC</li> <li>Evita custos de infraestrutura cloud</li> </ul> <p>Execu\u00e7\u00e3o:</p> <p>Qualquer pessoa pode rodar o projeto localmente seguindo o README:</p> <ol> <li>Instalar Docker</li> <li>Clonar reposit\u00f3rio</li> <li>Configurar <code>.env</code></li> <li><code>docker-compose up</code></li> <li>Acessar sistema</li> </ol>"},{"location":"Qualidade/devops/#boas-praticas-implementadas","title":"Boas Pr\u00e1ticas Implementadas","text":"<p>Documenta\u00e7\u00e3o:</p> <ul> <li>README com instru\u00e7\u00f5es claras de setup</li> <li>Coment\u00e1rios nos arquivos Docker</li> </ul> <p>Seguran\u00e7a:</p> <ul> <li>Secrets em <code>.env</code> (n\u00e3o commitados)</li> <li><code>.gitignore</code> configurado corretamente</li> <li>Portas n\u00e3o expostas desnecessariamente</li> </ul>"},{"location":"Qualidade/devops/#evolucao-futura","title":"Evolu\u00e7\u00e3o Futura","text":"<p>Poss\u00edveis melhorias para produ\u00e7\u00e3o:</p>"},{"location":"Qualidade/devops/#deploy-na-cloud","title":"Deploy na Cloud","text":"<p>Op\u00e7\u00f5es:</p> <ul> <li>AWS ECS</li> <li>Azure Container Apps</li> <li>Google Cloud Run</li> <li>Railway/Heroku</li> </ul>"},{"location":"Qualidade/devops/#cicd","title":"CI/CD","text":"<p>Pipeline completo:</p> <pre><code># .github/workflows/deploy.yml\n- Rodar testes\n- Build da imagem Docker\n- Push para registry\n- Deploy autom\u00e1tico\n</code></pre> <p>Apesar de n\u00e3o ter sido implantado em produ\u00e7\u00e3o, o uso de Docker demonstrou boas pr\u00e1ticas de DevOps e preparou o sistema para um eventual deploy futuro com m\u00ednimas modifica\u00e7\u00f5es.</p>"},{"location":"Qualidade/ihc/","title":"Interface e Experi\u00eancia do Usu\u00e1rio","text":""},{"location":"Qualidade/ihc/#design-da-interface","title":"Design da Interface","text":"<p>A interface do RAGBot foi desenvolvida com foco em simplicidade, clareza e usabilidade, proporcionando uma experi\u00eancia agrad\u00e1vel para consultar documentos atrav\u00e9s de chat.</p>"},{"location":"Qualidade/ihc/#principios-de-design","title":"Princ\u00edpios de Design","text":"<p>Minimalismo:</p> <ul> <li>Interface limpa sem elementos desnecess\u00e1rios</li> <li>Foco no conte\u00fado (chat e documentos)</li> <li>Hierarquia visual clara</li> </ul> <p>Consist\u00eancia:</p> <ul> <li>Padr\u00f5es visuais mantidos em todas as telas</li> <li>Componentes reutiliz\u00e1veis</li> <li>Comportamento previs\u00edvel</li> </ul> <p>Acessibilidade:</p> <ul> <li>Contraste adequado entre texto e fundo</li> <li>Tamanhos de bot\u00e3o apropriados para toque</li> <li>Feedback visual para todas as a\u00e7\u00f5es</li> </ul>"},{"location":"Qualidade/ihc/#tema-claro-e-escuro","title":"Tema Claro e Escuro","text":"<p>Uma das principais funcionalidades de UX \u00e9 o suporte a temas, permitindo que usu\u00e1rios escolham sua prefer\u00eancia visual.</p>"},{"location":"Qualidade/ihc/#modo-claro","title":"Modo Claro","text":"<p>Caracter\u00edsticas:</p> <ul> <li>Fundo branco (#FFFFFF)</li> <li>Texto escuro (#111827)</li> <li>Ideal para ambientes bem iluminados</li> <li>Menor cansa\u00e7o visual durante o dia</li> </ul> <p></p>"},{"location":"Qualidade/ihc/#modo-escuro","title":"Modo Escuro","text":"<p>Caracter\u00edsticas:</p> <ul> <li>Fundo escuro (#111827)</li> <li>Texto claro (#F9FAFB)</li> <li>Reduz fadiga ocular em ambientes escuros</li> <li>Economiza bateria em telas OLED</li> </ul> <p></p>"},{"location":"Qualidade/ihc/#alternancia-de-tema","title":"Altern\u00e2ncia de Tema","text":"<p>Implementa\u00e7\u00e3o:</p> <pre><code>// Toggle entre temas\nconst toggleTheme = () =&gt; {\n  isDark.value = !isDark.value\n  document.documentElement.classList.toggle('dark')\n  localStorage.setItem('theme', isDark.value ? 'dark' : 'light')\n}\n</code></pre> <p>Persist\u00eancia:</p> <ul> <li>Prefer\u00eancia salva no localStorage</li> <li>Tema restaurado ao reabrir aplica\u00e7\u00e3o</li> <li>Respeita prefer\u00eancia do sistema operacional</li> </ul> <p>Bot\u00e3o de altern\u00e2ncia:</p> <ul> <li>\u00cdcone de sol/lua</li> <li>Localizado no header (f\u00e1cil acesso)</li> <li>Feedback visual ao clicar</li> <li>Transi\u00e7\u00e3o suave entre temas</li> </ul> <p></p>"},{"location":"Qualidade/ihc/#feedback-visual","title":"Feedback Visual","text":"<p>O sistema fornece feedback constante ao usu\u00e1rio sobre o estado das opera\u00e7\u00f5es:</p>"},{"location":"Qualidade/ihc/#estados-de-carregamento","title":"Estados de Carregamento","text":"<p>Typing Indicator:</p> <pre><code>&lt;div class=\"typing-indicator\"&gt;\n  &lt;span&gt;&lt;/span&gt;\n  &lt;span&gt;&lt;/span&gt;\n  &lt;span&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre> <ul> <li>Exibido enquanto IA est\u00e1 processando</li> <li>Anima\u00e7\u00e3o de \"tr\u00eas pontos pulsantes\"</li> <li>Indica que sistema est\u00e1 trabalhando</li> </ul> <p>Loading Spinner:</p> <ul> <li>Mostrado durante upload de documentos</li> <li>Indica processamento em andamento</li> <li>Evita m\u00faltiplos cliques</li> </ul>"},{"location":"Qualidade/ihc/#feedback-de-acoes","title":"Feedback de A\u00e7\u00f5es","text":"<p>Envio de Mensagem:</p> <ul> <li>Mensagem aparece imediatamente no chat</li> <li>Scroll autom\u00e1tico para \u00faltima mensagem</li> <li>Campo de input limpo ap\u00f3s envio</li> </ul> <p>Upload de Documento:</p> <ul> <li>Barra de progresso (se implementada)</li> <li>Mensagem de sucesso ao completar</li> <li>Erro claro se falhar</li> </ul> <p>Navega\u00e7\u00e3o:</p> <ul> <li>Highlight da p\u00e1gina atual no menu</li> <li>Transi\u00e7\u00f5es suaves entre rotas</li> <li>Breadcrumbs quando aplic\u00e1vel</li> </ul>"},{"location":"Qualidade/ihc/#estados-de-erro","title":"Estados de Erro","text":"<p>Mensagens de Erro:</p> <ul> <li>Texto claro e objetivo</li> <li>Cor vermelha para chamar aten\u00e7\u00e3o</li> <li>Sugest\u00e3o de a\u00e7\u00e3o quando poss\u00edvel</li> </ul> <p>Exemplos:</p> <pre><code>\u274c Erro ao carregar documentos. Tente novamente.\n\u274c Documento muito grande. M\u00e1ximo: 50MB.\n\u274c Erro ao conectar com o servidor.\n</code></pre>"},{"location":"Qualidade/ihc/#design-responsivo","title":"Design Responsivo","text":"<p>A interface se adapta a diferentes tamanhos de tela, proporcionando boa experi\u00eancia em todos os dispositivos.</p>"},{"location":"Qualidade/ihc/#breakpoints","title":"Breakpoints","text":"<p>Mobile (&lt; 768px):</p> <ul> <li>Menu hamburguer</li> <li>Chat ocupa tela inteira</li> <li>Bot\u00f5es maiores para toque</li> </ul> <p>Tablet (768px - 1024px):</p> <ul> <li>Layout adaptado</li> <li>Sidebar pode ser colaps\u00e1vel</li> <li>Orienta\u00e7\u00e3o portrait/landscape</li> </ul> <p>Desktop (&gt; 1024px):</p> <ul> <li>Menu sempre vis\u00edvel</li> <li>Layout aproveitando largura</li> <li>Hover states em elementos</li> </ul>"},{"location":"Qualidade/ihc/#mobile-first","title":"Mobile-First","text":"<p>Abordagem:</p> <pre><code>/* Estilos base (mobile) */\n.chat-input { padding: 1rem; }\n\n/* Ajustes para desktop */\n@media (min-width: 768px) {\n  .chat-input { padding: 1.5rem; }\n}\n</code></pre> <p>Vantagens:</p> <ul> <li>Performance otimizada para mobile</li> <li>Progressive enhancement</li> <li>C\u00f3digo mais limpo</li> </ul>"},{"location":"Qualidade/ihc/#componentes-de-interface","title":"Componentes de Interface","text":""},{"location":"Qualidade/ihc/#header","title":"Header","text":"<p>Elementos:</p> <ul> <li>Logo/nome do sistema</li> <li>Menu de navega\u00e7\u00e3o</li> <li>Toggle de tema</li> <li>Timestamp (desktop)</li> </ul> <p>Comportamento:</p> <ul> <li>Sticky (fixo no topo)</li> <li>Transi\u00e7\u00e3o suave ao rolar</li> <li>Responsivo (hamburger em mobile)</li> </ul>"},{"location":"Qualidade/ihc/#animacoes-e-transicoes","title":"Anima\u00e7\u00f5es e Transi\u00e7\u00f5es","text":"<p>Transi\u00e7\u00f5es Suaves:</p> <pre><code>.chat-bubble {\n  transition: all 0.3s ease-in-out;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.3s;\n}\n</code></pre> <p>Anima\u00e7\u00f5es:</p> <ul> <li>Fade in ao aparecer mensagens</li> <li>Slide up para modals</li> <li>Pulse no typing indicator</li> <li>Smooth scroll no chat</li> </ul> <p>Performance:</p> <ul> <li>Transi\u00e7\u00f5es apenas em propriedades GPU (transform, opacity)</li> <li>Evita reflow/repaint desnecess\u00e1rios</li> <li>Anima\u00e7\u00f5es desabilitadas se usu\u00e1rio preferir (prefers-reduced-motion)</li> </ul>"},{"location":"Qualidade/ihc/#qualidade-visual","title":"Qualidade Visual","text":"<p>Tipografia:</p> <ul> <li>Fonte Inter (leg\u00edvel e moderna)</li> <li>Line-height adequado (1.5-1.6)</li> <li>Tamanhos hier\u00e1rquicos (16-18-24-32px)</li> </ul> <p>Iconografia:</p> <ul> <li>Icons SVG inline</li> <li>Tamanho consistente (20-24px)</li> <li>Cor adapt\u00e1vel ao tema</li> </ul> <p>Sombras e Eleva\u00e7\u00e3o:</p> <ul> <li>Box-shadow sutil para cards</li> <li>Eleva\u00e7\u00e3o indica interatividade</li> <li>Modo escuro com sombras mais escuras</li> </ul> <p>Essa aten\u00e7\u00e3o aos detalhes de interface e experi\u00eancia do usu\u00e1rio resulta em um sistema agrad\u00e1vel de usar, intuitivo e acess\u00edvel, mesmo sem uma fase formal de design antes do desenvolvimento.</p>"},{"location":"Qualidade/testes/","title":"Testes e Garantia de Qualidade","text":""},{"location":"Qualidade/testes/#estrategia-de-testes","title":"Estrat\u00e9gia de Testes","text":"<p>O projeto adotou uma abordagem mista de testes, combinando testes automatizados e manuais para garantir a qualidade do sistema.</p>"},{"location":"Qualidade/testes/#foco-em-testes-de-integracao","title":"Foco em Testes de Integra\u00e7\u00e3o","text":"<p>A estrat\u00e9gia priorizou testes de integra\u00e7\u00e3o para validar funcionalidades completas do sistema, especialmente o pipeline RAG, que \u00e9 o core do projeto.</p> <p>A ideia era justamente testar a intera\u00e7\u00e3o entre os principais componentes:</p> <ul> <li>Verificar fluxos end-to-end funcionando</li> <li>Garantir integra\u00e7\u00e3o entre componentes (PyPDF, embeddings, pgvector, Gemini)</li> <li>Validar o comportamento real do sistema</li> </ul>"},{"location":"Qualidade/testes/#framework-de-testes-pytest","title":"Framework de Testes - pytest","text":"<p>O backend utiliza pytest como framework principal para testes automatizados.</p> <p>Vantagens do pytest:</p> <ul> <li>Sintaxe simples e pyth\u00f4nica</li> <li>Fixtures para setup/teardown</li> <li>Marcadores para categorizar testes</li> <li>Relat\u00f3rios detalhados</li> <li>F\u00e1cil integra\u00e7\u00e3o com CI/CD</li> </ul>"},{"location":"Qualidade/testes/#estrutura-de-testes","title":"Estrutura de Testes","text":"<pre><code>tests/\n\u251c\u2500\u2500 conftest.py           # Configura\u00e7\u00f5es e fixtures compartilhadas\n\u251c\u2500\u2500 test_ingestion.py     # Testes do fluxo de ingest\u00e3o\n\u2514\u2500\u2500 __init__.py\n</code></pre>"},{"location":"Qualidade/testes/#casos-de-teste-implementados","title":"Casos de Teste Implementados","text":""},{"location":"Qualidade/testes/#1-fluxo-de-ingestao-de-documentos","title":"1. Fluxo de Ingest\u00e3o de Documentos","text":"<p>Objetivo: Validar o processo completo de upload e indexa\u00e7\u00e3o de PDFs.</p> <p>Cen\u00e1rios testados:</p> <p>Teste 1: Carregamento de PDF</p> <ul> <li>Verifica se o PyPDFLoader consegue ler o documento</li> <li>Valida que todas as p\u00e1ginas foram extra\u00eddas</li> <li>Confirma que o conte\u00fado n\u00e3o est\u00e1 vazio</li> </ul> <pre><code>def test_pdf_loading_with_pypdf(test_pdf_path):\n    loader = PyPDFLoader(test_pdf_path)\n    documents = loader.load()\n\n    assert documents is not None\n    assert len(documents) &gt; 0\n    assert len(documents[0].page_content.strip()) &gt; 0\n</code></pre> <p>Teste 2: Chunking de Documentos</p> <ul> <li>Verifica divis\u00e3o do texto em chunks</li> <li>Valida tamanho dos chunks (\u22641200 caracteres)</li> <li>Confirma que metadados s\u00e3o preservados</li> </ul> <pre><code>def test_document_chunking(test_pdf_path):\n    loader = PyPDFLoader(test_pdf_path)\n    documents = loader.load()\n\n    text_splitter = RecursiveCharacterTextSplitter(\n        chunk_size=1000, \n        chunk_overlap=150\n    )\n    chunks = text_splitter.split_documents(documents)\n\n    assert len(chunks) &gt; 0\n    assert all(len(chunk.page_content) &lt;= 1200 for chunk in chunks)\n</code></pre> <p>Teste 3: Gera\u00e7\u00e3o de Embeddings</p> <ul> <li>Verifica cria\u00e7\u00e3o de vetores 384-dimensionais</li> <li>Valida que modelo all-MiniLM-L6-v2 funciona</li> <li>Confirma formato dos embeddings</li> </ul> <pre><code>def test_embeddings_generation():\n    embeddings_model = SentenceTransformerEmbeddings()\n    test_texts = [\"Texto de exemplo para testar embeddings.\"]\n\n    embeddings = embeddings_model.embed_documents(test_texts)\n\n    assert len(embeddings) == len(test_texts)\n    assert len(embeddings[0]) == 384  # Dimens\u00e3o do modelo\n    assert all(isinstance(x, float) for x in embeddings[0])\n</code></pre>"},{"location":"Qualidade/testes/#2-fluxo-de-busca-e-resposta","title":"2. Fluxo de Busca e Resposta","text":"<p>Objetivo: Validar o processo de query e gera\u00e7\u00e3o de respostas.</p> <p>Cen\u00e1rios testados:</p> <p>Busca Vetorial</p> <ul> <li>Verifica similaridade sem\u00e2ntica funciona</li> <li>Valida retorno dos top-k chunks</li> <li>Confirma scores de similaridade</li> </ul> <p>Gera\u00e7\u00e3o de Respostas</p> <ul> <li>Verifica integra\u00e7\u00e3o com Gemini AI</li> <li>Valida formato da resposta</li> <li>Confirma cita\u00e7\u00e3o de fontes</li> </ul>"},{"location":"Qualidade/testes/#3-persistencia-de-dados","title":"3. Persist\u00eancia de Dados","text":"<p>Objetivo: Validar opera\u00e7\u00f5es no banco de dados.</p> <p>Cen\u00e1rios testados:</p> <ul> <li>Cria\u00e7\u00e3o de conversas</li> <li>Salvamento de mensagens</li> <li>Armazenamento de source chunks</li> <li>Metadados de documentos</li> </ul>"},{"location":"Qualidade/testes/#testes-manuais","title":"Testes Manuais","text":"<p>Al\u00e9m dos testes automatizados, foram realizados testes manuais sistem\u00e1ticos:</p>"},{"location":"Qualidade/testes/#testes-funcionais","title":"Testes Funcionais","text":"<p>Upload de Documentos:</p> <ul> <li>PDFs de diferentes tamanhos</li> <li>Documentos com acentua\u00e7\u00e3o</li> <li>Arquivos com imagens</li> </ul> <p>Chat e Perguntas:</p> <ul> <li>Perguntas simples e complexas</li> <li>Queries fora do escopo dos documentos</li> <li>Hist\u00f3rico de conversas</li> </ul> <p>Interface:</p> <ul> <li>Navega\u00e7\u00e3o entre p\u00e1ginas</li> <li>Responsividade em mobile</li> <li>Modo claro/escuro</li> </ul>"},{"location":"Qualidade/testes/#testes-de-usabilidade","title":"Testes de Usabilidade","text":"<p>Experi\u00eancia do Usu\u00e1rio:</p> <ul> <li>Fluidez da intera\u00e7\u00e3o</li> <li>Clareza das respostas</li> <li>Visualiza\u00e7\u00e3o de fontes</li> <li>Feedbacks visuais</li> </ul>"},{"location":"Qualidade/testes/#tabela-de-casos-de-teste","title":"Tabela de Casos de Teste","text":"ID Categoria Descri\u00e7\u00e3o Tipo Status T01 Ingest\u00e3o Carregar PDF com PyPDFLoader Automatizado \u2705 Passou T02 Ingest\u00e3o Dividir documento em chunks Automatizado \u2705 Passou T03 Ingest\u00e3o Gerar embeddings 384-dim Automatizado \u2705 Passou T04 Ingest\u00e3o Salvar embeddings no pgvector Automatizado \u2705 Passou T05 Busca Busca sem\u00e2ntica retorna chunks relevantes Automatizado \u2705 Passou T06 Busca Scores de similaridade corretos Automatizado \u2705 Passou T07 API Endpoint /ask retorna resposta v\u00e1lida Manual \u2705 Passou T08 API Endpoint /documents lista PDFs Manual \u2705 Passou T09 Interface Chat exibe mensagens corretamente Manual \u2705 Passou T10 Interface Upload de documento funciona Manual \u2705 Passou T11 Interface Modo escuro alterna corretamente Manual \u2705 Passou T12 Performance Resposta em &lt; 5 segundos Manual \u2705 Passou"},{"location":"Qualidade/testes/#execucao-dos-testes","title":"Execu\u00e7\u00e3o dos Testes","text":""},{"location":"Qualidade/testes/#testes-automatizados","title":"Testes Automatizados","text":"<p>Comando:</p> <pre><code># Executar todos os testes\npytest\n\n# Executar com verbosidade\npytest -v\n\n# Executar testes espec\u00edficos\npytest tests/test_ingestion.py\n\n# Gerar relat\u00f3rio de cobertura\npytest --cov=app --cov-report=html\n</code></pre> <p>Sa\u00edda esperada:</p> <pre><code>========================== test session starts ==========================\ncollected 6 items\n\ntests/test_ingestion.py::test_pdf_loading \u2705 PASSED\ntests/test_ingestion.py::test_chunking \u2705 PASSED\ntests/test_ingestion.py::test_embeddings \u2705 PASSED\ntests/test_ingestion.py::test_vector_search \u2705 PASSED\ntests/test_ingestion.py::test_database \u2705 PASSED\ntests/test_ingestion.py::test_integration \u2705 PASSED\n\n========================== 6 passed in 12.45s ==========================\n</code></pre>"},{"location":"Qualidade/testes/#fixtures-e-setup","title":"Fixtures e Setup","text":"<p>O arquivo <code>conftest.py</code> cont\u00e9m fixtures compartilhadas:</p> <pre><code>@pytest.fixture\ndef test_pdf_path():\n    \"\"\"Retorna caminho para PDF de teste\"\"\"\n    return \"tests/fixtures/sample.pdf\"\n\n@pytest.fixture\ndef test_database():\n    \"\"\"Setup de banco de dados de teste\"\"\"\n    # Criar banco tempor\u00e1rio\n    yield db_connection\n    # Cleanup ap\u00f3s teste\n</code></pre>"},{"location":"Qualidade/testes/#desafios-e-aprendizados","title":"Desafios e Aprendizados","text":""},{"location":"Qualidade/testes/#desafios-encontrados","title":"Desafios Encontrados","text":"<p>Testes com IA:</p> <ul> <li>Respostas do Gemini n\u00e3o s\u00e3o determin\u00edsticas</li> <li>Dificulta testes de regress\u00e3o exatos</li> <li>Solu\u00e7\u00e3o: Validar estrutura e fontes, n\u00e3o conte\u00fado exato</li> </ul> <p>Testes com Embeddings:</p> <ul> <li>Modelo demora para carregar</li> <li>Solu\u00e7\u00e3o: Cache do modelo entre testes</li> </ul> <p>Banco de Dados:</p> <ul> <li>Isolamento entre testes</li> <li>Solu\u00e7\u00e3o: Fixtures para setup/teardown</li> </ul>"},{"location":"Qualidade/testes/#melhorias-futuras","title":"Melhorias Futuras","text":"<p>Cobertura:</p> <ul> <li>Aumentar cobertura de testes unit\u00e1rios</li> <li>Adicionar testes no frontend com Vitest</li> <li>Testar edge cases e erros</li> </ul> <p>Automa\u00e7\u00e3o:</p> <ul> <li>Integrar testes com CI/CD no GitHub Actions</li> <li>Testes autom\u00e1ticos em cada PR</li> <li>Relat\u00f3rios de cobertura autom\u00e1ticos</li> </ul> <p>Performance:</p> <ul> <li>Adicionar testes de carga</li> <li>Validar escalabilidade com muitos documentos</li> <li>Medir tempo de resposta sob stress</li> </ul>"},{"location":"Qualidade/testes/#qualidade-de-codigo","title":"Qualidade de C\u00f3digo","text":"<p>Al\u00e9m dos testes, outras pr\u00e1ticas garantiram qualidade:</p> <p>Type Hints:</p> <ul> <li>Todo c\u00f3digo Python utiliza type annotations</li> <li>Valida\u00e7\u00e3o est\u00e1tica com mypy (opcional)</li> </ul> <p>Linting:</p> <ul> <li>Code style consistente</li> <li>Docstrings em fun\u00e7\u00f5es importantes</li> </ul> <p>Code Review:</p> <ul> <li>Todos os PRs passam por revis\u00e3o</li> <li>Dois pares de olhos em cada mudan\u00e7a</li> </ul> <p>Essa abordagem de testes garantiu que as funcionalidades principais do sistema, especialmente o pipeline RAG, funcionassem de forma confi\u00e1vel e previs\u00edvel.</p>"}]}